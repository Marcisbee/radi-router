var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,e){a!=Array.prototype&&a!=Object.prototype&&(a[b]=e.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(b){return $jscomp.SYMBOL_PREFIX+(b||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var e=0,d={next:function(){if(e<a.length){var c=e++;return{value:b(c,a[c]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};
$jscomp.polyfill=function(a,b,e,d){if(b){e=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var c=a[d];c in e||(e[c]={});e=e[c]}a=a[a.length-1];d=e[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(e,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");$jscomp.owns=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};
$jscomp.assign="function"==typeof Object.assign?Object.assign:function(a,b){for(var e=1;e<arguments.length;e++){var d=arguments[e];if(d)for(var c in d)$jscomp.owns(d,c)&&(a[c]=d[c])}return a};$jscomp.polyfill("Object.assign",function(a){return a||$jscomp.assign},"es6","es3");$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(a){function b(){this.batch_=null}function e(a){return a instanceof c?a:new c(function(f,c){f(a)})}if(a&&!$jscomp.FORCE_POLYFILL_PROMISE)return a;b.prototype.asyncExecute=function(a){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(a);return this};b.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var d=$jscomp.global.setTimeout;b.prototype.asyncExecuteFunction=function(a){d(a,
0)};b.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=this.batch_;this.batch_=[];for(var h=0;h<a.length;++h){var c=a[h];delete a[h];try{c()}catch(m){this.asyncThrow_(m)}}}this.batch_=null};b.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var c=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var f=this.createResolveAndReject_();try{a(f.resolve,f.reject)}catch(k){f.reject(k)}};c.prototype.createResolveAndReject_=
function(){function a(a){return function(f){b||(b=!0,a.call(c,f))}}var c=this,b=!1;return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};c.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof c)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var f=null!=a;break a;case "function":f=!0;break a;default:f=!1}f?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};c.prototype.resolveToNonPromiseObj_=function(a){var c=
void 0;try{c=a.then}catch(k){this.reject_(k);return}"function"==typeof c?this.settleSameAsThenable_(c,a):this.fulfill_(a)};c.prototype.reject_=function(a){this.settle_(2,a)};c.prototype.fulfill_=function(a){this.settle_(1,a)};c.prototype.settle_=function(a,c){if(0!=this.state_)throw Error("Cannot settle("+a+", "+c|"): Promise already settled in state"+this.state_);this.state_=a;this.result_=c;this.executeOnSettledCallbacks_()};c.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=
this.onSettledCallbacks_,c=0;c<a.length;++c)a[c].call(),a[c]=null;this.onSettledCallbacks_=null}};var y=new b;c.prototype.settleSameAsPromise_=function(a){var c=this.createResolveAndReject_();a.callWhenSettled_(c.resolve,c.reject)};c.prototype.settleSameAsThenable_=function(a,c){var b=this.createResolveAndReject_();try{a.call(c,b.resolve,b.reject)}catch(m){b.reject(m)}};c.prototype.then=function(a,b){function d(a,c){return"function"==typeof a?function(c){try{e(a(c))}catch(t){f(t)}}:c}var e,f,h=new c(function(a,
c){e=a;f=c});this.callWhenSettled_(d(a,e),d(b,f));return h};c.prototype.catch=function(a){return this.then(void 0,a)};c.prototype.callWhenSettled_=function(a,c){function b(){switch(d.state_){case 1:a(d.result_);break;case 2:c(d.result_);break;default:throw Error("Unexpected state: "+d.state_);}}var d=this;null==this.onSettledCallbacks_?y.asyncExecute(b):this.onSettledCallbacks_.push(function(){y.asyncExecute(b)})};c.resolve=e;c.reject=function(a){return new c(function(c,b){b(a)})};c.race=function(a){return new c(function(c,
b){for(var d=$jscomp.makeIterator(a),f=d.next();!f.done;f=d.next())e(f.value).callWhenSettled_(c,b)})};c.all=function(a){var b=$jscomp.makeIterator(a),d=b.next();return d.done?e([]):new c(function(a,c){function f(c){return function(b){h[c]=b;l--;0==l&&a(h)}}var h=[],l=0;do h.push(void 0),l++,e(d.value).callWhenSettled_(f(h.length-1),c),d=b.next();while(!d.done)})};return c},"es6","es3");
(function(a,b){"object"===typeof exports&&"undefined"!==typeof module?b(exports):"function"===typeof define&&define.amd?define(["exports"],b):b(a["radi-router"]={})})(this,function(a){var b=function(a,b){function c(a){return"function"===typeof a?c(a()):a}function d(a,c){if(null!==a||"undefined"!==typeof c){var b=l.routes[a],g="object"===typeof b?b.component:b;if(("undefined"===typeof g||"number"===typeof g||!g)&&"undefined"===typeof b)return l.config.errors[g||404]();if("string"===typeof b.redirect)return t(b.redirect);
var n=[l.before||null,b.before||null].filter(function(a){return"function"===typeof a});if(0<n.length){var d=function(b,A){var e=n.pop();return"function"!==typeof e?b(g):e(a,c,function(a){return"undefined"===typeof a||!0===a?0<n.length?d(b,A):b(g):a?0<n.length?d(b,A):b(a):b(l.config.errors[403]())})};return new Promise(d)}return g}}function e(a){var b=a.placeholder,g=a.waitMs;return x(function(a){var n=a.route;a=new Promise(function(a){var b=c(d(n));b instanceof Promise?b.then(function(b){return a(c(b))}):
a(b)});return h("await",{src:a,placeholder:b,waitMs:g})})}var h=a.h,k=a.Service,m=a.Store;a=a.customAttribute;var l={},u,q,z,w,t=function(a){window.location.hash=a;return!0},B=function(a){for(var b in a)if(a.hasOwnProperty(b)&&a[b].children){var c=B(a[b].children),g;for(g in c)c.hasOwnProperty(g)&&(a[b+g]=c[g])}return a},C=function(a,b,c,d){var g=a.split(/[\?&]/).slice(1).map(function(a){return a.split("\x3d")}).reduce(function(a,b){var c;return Object.assign(a,(c={},c[b[0]]=b[1],c))},{}),n=a.match(b[0]);
this.path=a;this.key=d;this.query=g;this.cmp=c[d]||{};this.params=this.cmp.data||{};for(a=0;a<b[1].length;a++)this.params[b[1][a]]=n[a+1]},D=function(){for(var a=[],b=arguments.length;b--;)a[b]=arguments[b];return a.reduce(function(a,b){return b?a.concat(b):a},[])},v=(new Subscribe(window)).on("hashchange",function(a){return{hash:location.hash.substr(1)||"/"}}),x=(new m({route:v({hash:location.hash.substr(1)||"/"}).map(function(a){return a.hash}),params:{},query:{},current:{title:null,tags:[],meta:{}}})).map(function(a,
c){c=window.location.hash.substr(1)||"/";if(z===c)var d=w;else{console.log(l,b);u||(u=Object.keys(l.routes));if(!q){d=u;var g=d.length,e=Array(g);for(--g;0<=g;g--){var n=g;var f=d[g].split("/");for(var h=[],m=[],k=0;k<f.length;k++)58===f[k].charCodeAt(0)?(h.push("([^/]+?)"),m.push(f[k].substr(1))):""!==f[k]&&h.push(f[k]);f=[new RegExp("^/"+h.join("/")+"(?:[/])?(?:[?\x26].*)?$","i"),m];e[n]=f}q=e}d=!1;for(e=0;e<q.length;e++)if(q[e][0].test(c)){w=new C(c,q[e],l.routes,u[e]);d=!0;break}z=c;d=d?w:{key:null}}d=
d||{};window.scrollTo(0,0);e=d.cmp&&d.cmp.title;g=a.route.split("#");return{route:g[0],hash:g[1],last:a.active,location:c,params:d.params||{},query:d.query||{},active:d.key||"",current:{title:"object"===typeof e?e:{text:e},tags:d.cmp&&d.cmp.tags||[],meta:d.cmp&&d.cmp.meta||{}}}});a("href",function(a,b){return"#"===b[0]?x(function(a){return"#"+a.route+b}):"#"+b},{allowedTags:["a"],addToElement:!0});var r=new m({prefix:null,text:null,suffix:null,seperator:" | "}),E=function(a,b){return{prefix:b}},F=
function(a,b){return{suffix:b}},G=function(a,b){return{text:b}},H=function(a,b){return{seperator:b}},p=function(){this.state=r};p.prototype.setPrefix=function(a){return r.dispatch(E,a)};p.prototype.setSuffix=function(a){return r.dispatch(F,a)};p.prototype.set=function(a){return r.dispatch(G,a)};p.prototype.setSeperator=function(a){return r.dispatch(H,a)};p.prototype.onUpdate=function(){var a=(this.$router.getTitle()||{}).text||b.title&&b.title.text||this.state.text,c=D(b.title&&b.title.prefix||this.state.prefix,
a,b.title&&b.title.suffix||this.state.suffix).join(this.state.seperator);c&&document.title!==c&&(document.title=c);this.state.text&&a!==this.state.text&&this.set(null)};m=b.beforeEach;a=b.afterEach;v=function(a,c){var d=b.errors&&b.errors[a];return d?"function"===typeof d?d:function(){return d}:c};l={config:{errors:{404:v(404,function(){return h("div",{},"Error 404: Not Found")}),403:v(403,function(){return h("div",{},"Error 403: Forbidden")})}},before:m,after:a,routes:B(b.routes),write:t,Router:e};
k.add("routerStore",function(){return x});k.add("Title",function(){return new p});k.add("Router",function(){return e});return l};window&&(window.RadiRouter=b);a.version="0.5.0";a.default=b;Object.defineProperty(a,"__esModule",{value:!0})});
