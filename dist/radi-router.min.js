!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd||r(t["radi-router"]={})}(this,function(t){"use strict";var r;const e=":".charCodeAt(0);var n,a,o,i;function s(t){for(var r=t.split("/"),n=[],a=[],o=0;o<r.length;o++)e===r[o].charCodeAt(0)?(n.push("([^/]+?)"),a.push(r[o].substr(1))):""!==r[o]&&n.push(r[o]);return[new RegExp("^/"+n.join("/")+"(?:/(?=$))?$","i"),a]}class h{constructor(t,r,e,n){var a=t.match(r[0]);this.path=t,this.key=n,this.params={};for(var o=0;o<r[1].length;o++)this.params[r[1][o]]=a[o+1];this.cmp=e[n]}}t.default=function(t,e){return r=t,function(t){function c(r){if(o===r)return i;n||(n=Object.keys(t.routes)),a||(a=function(t){for(var r=t.length,e=new Array(r),n=r-1;n>=0;n--)e[n]=s(t[n]);return e}(n));for(var e=!1,c=0;c<a.length;c++)if(a[c][0].test(r)){i=new h(r,a[c],t.routes,n[c]),e=!0;break}return o=r,e?i:{key:"$error"}}window.r_routes=t.routes,window.r_before=t.beforeEach||!0,window.r_after=t.afterEach||null;var u="";for(var l in t.routes)u=u.concat(`cond(\n        l(this.active === '${l}' && (r_before === true || r_before('${l}',2))),\n        function () { var ret = r('div', new r_routes['${l}']()); if(r_after)r_after(); return ret; }\n      ).`);""!==u&&(u=u.concat("else(r('div', 'Error 404'))"));var f=`return r('div', ${u})`,d=e("$router",{active:"",params:{},last:"",location:""});return r.component({name:"radi-router",view:new Function(f),state:{location:window.location.hash.substr(1)||"/",params:{},last:null,active:null},actions:{onMount(){window.onhashchange=this.hashChange,this.hashChange()},hashChange(){this.last=this.location,this.location=window.location.hash.substr(1)||"/";var t=c(this.location);t&&(this.active=t.key,this.params=t.params),this.updateMixin(),console.log("[radi-router] Route change",t,this.location)},updateMixin(){d.params=this.params,d.active=this.active,d.last=this.last,d.location=this.location}}})}},t.version="0.1.7"});
//# sourceMappingURL=radi-router.js.map