var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,f){a!=Array.prototype&&a!=Object.prototype&&(a[b]=f.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(b){return $jscomp.SYMBOL_PREFIX+(b||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var f=0,g={next:function(){if(f<a.length){var d=f++;return{value:b(d,a[d]),done:!1}}g.next=function(){return{done:!0,value:void 0}};return g.next()}};g[Symbol.iterator]=function(){return g};return g};
$jscomp.polyfill=function(a,b,f,g){if(b){f=$jscomp.global;a=a.split(".");for(g=0;g<a.length-1;g++){var d=a[g];d in f||(f[d]={});f=f[d]}a=a[a.length-1];g=f[a];b=b(g);b!=g&&null!=b&&$jscomp.defineProperty(f,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");$jscomp.owns=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};
$jscomp.assign="function"==typeof Object.assign?Object.assign:function(a,b){for(var f=1;f<arguments.length;f++){var g=arguments[f];if(g)for(var d in g)$jscomp.owns(g,d)&&(a[d]=g[d])}return a};$jscomp.polyfill("Object.assign",function(a){return a||$jscomp.assign},"es6","es3");$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(a){function b(){this.batch_=null}function f(a){return a instanceof d?a:new d(function(h,b){h(a)})}if(a&&!$jscomp.FORCE_POLYFILL_PROMISE)return a;b.prototype.asyncExecute=function(a){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(a);return this};b.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var g=$jscomp.global.setTimeout;b.prototype.asyncExecuteFunction=function(a){g(a,
0)};b.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=this.batch_;this.batch_=[];for(var l=0;l<a.length;++l){var b=a[l];delete a[l];try{b()}catch(r){this.asyncThrow_(r)}}}this.batch_=null};b.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var d=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var h=this.createResolveAndReject_();try{a(h.resolve,h.reject)}catch(p){h.reject(p)}};d.prototype.createResolveAndReject_=
function(){function a(a){return function(h){d||(d=!0,a.call(b,h))}}var b=this,d=!1;return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};d.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof d)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var b=null!=a;break a;case "function":b=!0;break a;default:b=!1}b?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};d.prototype.resolveToNonPromiseObj_=function(a){var b=
void 0;try{b=a.then}catch(p){this.reject_(p);return}"function"==typeof b?this.settleSameAsThenable_(b,a):this.fulfill_(a)};d.prototype.reject_=function(a){this.settle_(2,a)};d.prototype.fulfill_=function(a){this.settle_(1,a)};d.prototype.settle_=function(a,b){if(0!=this.state_)throw Error("Cannot settle("+a+", "+b|"): Promise already settled in state"+this.state_);this.state_=a;this.result_=b;this.executeOnSettledCallbacks_()};d.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=
this.onSettledCallbacks_,b=0;b<a.length;++b)a[b].call(),a[b]=null;this.onSettledCallbacks_=null}};var u=new b;d.prototype.settleSameAsPromise_=function(a){var b=this.createResolveAndReject_();a.callWhenSettled_(b.resolve,b.reject)};d.prototype.settleSameAsThenable_=function(a,b){var d=this.createResolveAndReject_();try{a.call(b,d.resolve,d.reject)}catch(r){d.reject(r)}};d.prototype.then=function(a,b){function f(a,b){return"function"==typeof a?function(b){try{g(a(b))}catch(x){h(x)}}:b}var g,h,l=new d(function(a,
b){g=a;h=b});this.callWhenSettled_(f(a,g),f(b,h));return l};d.prototype.catch=function(a){return this.then(void 0,a)};d.prototype.callWhenSettled_=function(a,b){function d(){switch(f.state_){case 1:a(f.result_);break;case 2:b(f.result_);break;default:throw Error("Unexpected state: "+f.state_);}}var f=this;null==this.onSettledCallbacks_?u.asyncExecute(d):this.onSettledCallbacks_.push(function(){u.asyncExecute(d)})};d.resolve=f;d.reject=function(a){return new d(function(b,d){d(a)})};d.race=function(a){return new d(function(b,
d){for(var g=$jscomp.makeIterator(a),h=g.next();!h.done;h=g.next())f(h.value).callWhenSettled_(b,d)})};d.all=function(a){var b=$jscomp.makeIterator(a),g=b.next();return g.done?f([]):new d(function(a,d){function h(b){return function(d){l[b]=d;p--;0==p&&a(l)}}var l=[],p=0;do l.push(void 0),p++,f(g.value).callWhenSettled_(h(l.length-1),d),g=b.next();while(!g.done)})};return d},"es6","es3");
(function(a,b){"object"===typeof exports&&"undefined"!==typeof module?b(exports):"function"===typeof define&&define.amd?define(["exports"],b):b(a["radi-router"]={})})(this,function(a){function b(){return!("undefined"===typeof window||!window.history||!window.history.pushState)}function f(e,c,a){this.root=null;this._routes=[];this._useHash=c;this._hash="undefined"===typeof a?"#":a;this._destroyed=this._paused=!1;this._defaultHandler=this._notFoundHandler=this._lastRouteFailed=this._lastRouteResolved=
null;this._usePushState=!c&&b();this._onLocationChange=this._onLocationChange.bind(this);this._genericHooks=null;this._historyAPIUpdateMethod="pushState";e?this.root=c?e.replace(/\/$/,"/"+this._hash):e.replace(/\/$/,""):c&&(this.root=this._cLoc().split(this._hash)[0].replace(/\/$/,"/"+this._hash));this._listen();this.updatePageLinks()}function g(e){return e instanceof RegExp?e:e.replace(/\/+$/,"").replace(/^\/+/,"^/")}function d(e,c){return 0!==c.length&&e?e.slice(1,e.length).reduce(function(e,a,
b){null===e&&(e={});e[c[b]]=decodeURIComponent(a);return e},null):null}function u(e){var a=[];return{regexp:e instanceof RegExp?e:new RegExp(e.replace(f.PARAMETER_REGEXP,function(e,c,b){a.push(b);return f.REPLACE_VARIABLE_REGEXP}).replace(f.WILDCARD_REGEXP,f.REPLACE_WILDCARD)+f.FOLLOWED_BY_SLASH_REGEXP,f.MATCH_REGEXP_FLAGS),paramNames:a}}function h(e,a){return a.replace(/\/$/,"").split("/").length-e.replace(/\/$/,"").split("/").length}function l(e,a){void 0===a&&(a=[]);return a.map(function(a){var c=
u(g(a.route)),b=c.regexp;c=c.paramNames;b=e.replace(/^\/+/,"/").match(b);c=d(b,c);return b?{match:b,route:a,params:c}:!1}).filter(function(e){return e})}function p(e,a){return l(e,a)[0]||!1}function r(e,a){a=a.map(function(a){return""===a.route||"*"===a.route?e:e.split(new RegExp(a.route+"($|/)"))[0]});var c=g(e);return 1<a.length?a.reduce(function(a,e){a.length>e.length&&(a=e);return a},a[0]):1===a.length?a[0]:c}function B(a,c,k){"undefined"===typeof k&&(k="#");b()&&!c?a=a.split(/\?(.*)?$/)[0].split(k)[0]:
(a=a.split(k),a=1<a.length?a[1].split(/\?(.*)?$/)[0]:a[0].split(/\?(.*)?$/)[0]);return a}function t(a,c,b){if(c&&"object"===typeof c){if(c.before){c.before(function(e){void 0===e&&(e=!0);e&&(a(),c.after&&c.after(b))},b);return}if(c.after){a();c.after&&c.after(b);return}}a()}function G(a,c,k){if(b()&&!c||!a.match(k))return!1;a=a.split(k);return 2>a.length||""===a[1]}function H(a,c){var e={},b;for(b in a)Object.prototype.hasOwnProperty.call(a,b)&&-1===c.indexOf(b)&&(e[b]=a[b]);return e}function w(){return q._cLoc().replace(q._getRoot(),
"")||"/"}function x(){return"Access Forbidden"}function I(){return"Not Found"}function C(a,c,b){void 0===c&&(c=[]);void 0===b&&(b={});return Object.keys(a).reduce(function(e,k){var d,f=a[k];k=c.concat(k);var g=f.children?C(f.children,k,b):{};f.children&&delete f.children;return Object.assign(e,(d={},d[("/"+k.join("/")).replace(/\/\//g,"/")]=f,d),g)},b)}function D(a){function e(a,e){return function(c){return!1===c?(v({params:e.params||{},meta:e.meta||{},tags:e.tags||[],title:e.title||"",component:l}),
a(!1)):a(!0)}}var b=a.routes,d=a.beforeEach,f=a.afterEach,g=a.title;void 0===g&&(g={text:"Radi",suffix:null,prefix:null,separator:null});a=a.errors;var h=a[404];void 0===h&&(h=I);var l=a[403];void 0===l&&(l=x);var n=C(b);b=Object.keys(n);g.text&&m.setText(g.text);g.suffix&&m.setSuffix(g.suffix);g.prefix&&m.setPrefix(g.prefix);g.separator&&m.setSeparator(g.separator);q.notFound(function(a){void 0===a&&(a={});return v({params:a,component:h})});q.hooks({before:function(a,c){var b=w(),k=q.helpers.match(b,
q._routes);c=Object.assign({},p[k?k.route&&k.route.route:b],{params:c});return"function"===typeof d?d(e(a,c),c):a()},after:function(a){window.scrollTo(0,0);var e=w();if("function"===typeof f)return f({path:e,params:a})}});var p={};b.reduce(function(a,c){var b=Object.assign({},n[c],{params:{}});p[c]=b;return a.on(c,function(a){void 0===a&&(a={});var e=b.component();return v(Object.assign({},b,{params:a,component:e}))},{before:function(a,c){var k=w(),d=q.helpers.match(k,q._routes);c=Object.assign({},
p[d?d.route&&d.route.route:k],Object.assign({},b.params,c));return"function"===typeof b.before?b.before(e(a,c),c):a()}})},q).resolve();return q}function E(a){a=a.placeholder;void 0===a&&(a="Loading..");var c=n.Watch(y),e=c.component;c=c.title;"string"===typeof c&&m.setText(c);c&&"object"===typeof c&&(c.text&&m.setText(c.text),c.suffix&&m.setSuffix(c.suffix),c.prefix&&m.setPrefix(c.prefix),c.separator&&m.setSeparator(c.separator));return e instanceof Promise?n.html(n.Await,{src:e,placeholder:a}):e}
function z(a){a.preventDefault();a=a.target.getAttribute("href");q.navigate(a)}function F(a){var c=a.children,e=a.onclick;a=H(a,["children","onclick"]);return n.html("a",Object.assign({},a,{onclick:function(a){return z(a),"function"===typeof e&&e(a)}}),c)}f.prototype={helpers:{match:p,root:r,clean:g,getOnlyURL:B},navigate:function(a,c){a=a||"";this._usePushState?(a=(c?"":this._getRoot()+"/")+a.replace(/^\/+/,"/"),a=a.replace(/([^:])(\/{2,})/g,"$1/"),history[this._historyAPIUpdateMethod]({},"",a),
this.resolve()):"undefined"!==typeof window&&(a=a.replace(new RegExp("^"+this._hash),""),window.location.href=window.location.href.replace(/#$/,"").replace(new RegExp(this._hash+".*$"),"")+this._hash+a);return this},on:function(){for(var a=this,c=[],b=arguments.length;b--;)c[b]=arguments[b];"function"===typeof c[0]?this._defaultHandler={handler:c[0],hooks:c[1]}:2<=c.length?"/"===c[0]?(b=c[1],"object"===typeof c[1]&&(b=c[1].uses),this._defaultHandler={handler:b,hooks:c[2]}):this._add(c[0],c[1],c[2]):
"object"===typeof c[0]&&Object.keys(c[0]).sort(h).forEach(function(b){a.on(b,c[0][b])});return this},off:function(a){null!==this._defaultHandler&&a===this._defaultHandler.handler?this._defaultHandler=null:null!==this._notFoundHandler&&a===this._notFoundHandler.handler&&(this._notFoundHandler=null);this._routes=this._routes.reduce(function(c,b){b.handler!==a&&c.push(b);return c},[]);return this},notFound:function(a,c){this._notFoundHandler={handler:a,hooks:c};return this},resolve:function(a){var c=
this,b,e=(a||this._cLoc()).replace(this._getRoot(),"");this._useHash&&(e=e.replace(new RegExp("^/"+this._hash),"/"));var d=(a||this._cLoc()).split(/\?(.*)?$/).slice(1).join(""),f=B(e,this._useHash,this._hash);if(this._paused)return!1;if(this._lastRouteStopped&&this._lastRouteResolved&&f===this._lastRouteResolved.url&&d===this._lastRouteResolved.query)return this._lastRouteStopped=!0,this._lastRouteResolved.hooks&&this._lastRouteResolved.hooks.already&&this._lastRouteResolved.hooks.already(this._lastRouteResolved.params),
!1;if(b=p(f,this._routes)){this._callLeave();this._lastRouteStopped=null;this._lastRouteResolved={url:f,query:d,hooks:b.route.hooks,params:b.params,name:b.route.name};var g=b.route.handler;t(function(){t(function(){b.route.route instanceof RegExp?g.apply(void 0,b.match.slice(1,b.match.length)):g(b.params,d)},b.route.hooks,b.params,c._genericHooks)},this._genericHooks,b.params);return b}if(this._defaultHandler&&(""===f||"/"===f||f===this._hash||G(f,this._useHash,this._hash)))return t(function(){t(function(){c._callLeave();
c._lastRouteStopped=null;c._lastRouteResolved={url:f,query:d,hooks:c._defaultHandler.hooks};c._defaultHandler.handler(d)},c._defaultHandler.hooks)},this._genericHooks),!0;this._notFoundHandler&&t(function(){t(function(){c._callLeave();c._lastRouteStopped=null;c._lastRouteResolved={url:f,query:d,hooks:c._notFoundHandler.hooks};c._notFoundHandler.handler(d)},c._notFoundHandler.hooks)},this._genericHooks);return!1},destroy:function(){this._routes=[];this._destroyed=!0;this._genericHooks=this._lastRouteResolved=
null;clearTimeout(this._listeningInterval);"undefined"!==typeof window&&(window.removeEventListener("popstate",this._onLocationChange),window.removeEventListener("hashchange",this._onLocationChange))},updatePageLinks:function(){var a=this;"undefined"!==typeof document&&this._findLinks().forEach(function(b){b.hasListenerAttached||(b.addEventListener("click",function(c){if((c.ctrlKey||c.metaKey)&&"a"==c.target.tagName.toLowerCase())return!1;var e=a.getLinkPath(b);a._destroyed||(c.preventDefault(),a.navigate(e.replace(/\/+$/,
"").replace(/^\/+/,"/")))}),b.hasListenerAttached=!0)})},generate:function(a,b){void 0===b&&(b={});var c=this._routes.reduce(function(c,e){var d;if(e.name===a)for(d in c=e.route,b)c=c.toString().replace(":"+d,b[d]);return c},"");return this._useHash?this._hash+c:c},link:function(a){return this._getRoot()+a},pause:function(a){void 0===a&&(a=!0);this._historyAPIUpdateMethod=(this._paused=a)?"replaceState":"pushState"},resume:function(){this.pause(!1)},historyAPIUpdateMethod:function(a){return"undefined"===
typeof a?this._historyAPIUpdateMethod:this._historyAPIUpdateMethod=a},disableIfAPINotAvailable:function(){b()||this.destroy()},lastRouteResolved:function(){return this._lastRouteResolved},getLinkPath:function(a){return a.getAttribute("href")},hooks:function(a){this._genericHooks=a},_add:function(a,b,d){void 0===b&&(b=null);void 0===d&&(d=null);"string"===typeof a&&(a=encodeURI(a));this._routes.push("object"===typeof b?{route:a,handler:b.uses,name:b.as,hooks:d||b.hooks,tags:b.tags,title:b.title}:{route:a,
handler:b,hooks:d});return this._add},_getRoot:function(){return null!==this.root?this.root:this.root=r(this._cLoc().split("?")[0],this._routes)},_listen:function(){var a=this;if(this._usePushState)window.addEventListener("popstate",this._onLocationChange);else if("undefined"!==typeof window&&"onhashchange"in window)window.addEventListener("hashchange",this._onLocationChange);else{var b=this._cLoc(),d;var f=function(){d=a._cLoc();b!==d&&(b=d,a.resolve());a._listeningInterval=setTimeout(f,200)};f()}},
_cLoc:function(){return"undefined"!==typeof window?"undefined"!==typeof window.__NAVIGO_WINDOW_LOCATION_MOCK__?window.__NAVIGO_WINDOW_LOCATION_MOCK__:g(window.location.href):""},_findLinks:function(){return[].slice.call(document.querySelectorAll("[data-navigo]"))},_onLocationChange:function(){this.resolve()},_callLeave:function(){var a=this._lastRouteResolved;a&&a.hooks&&a.hooks.leave&&a.hooks.leave(a.params)}};f.PARAMETER_REGEXP=/([:*])(\w+)/g;f.WILDCARD_REGEXP=/\*/g;f.REPLACE_VARIABLE_REGEXP="([^/]+)";
f.REPLACE_WILDCARD="(?:.*)";f.FOLLOWED_BY_SLASH_REGEXP="(?:/$|$)";f.MATCH_REGEXP_FLAGS="";var n="undefined"!==typeof window?window.Radi:n,v=n.Action("Router Action"),y=n.Store({meta:{},params:{},component:null,tags:[],title:""}).on(v,function(a,b){return Object.assign({},a,b)}),m={setText:n.Action("Router Set Title Text"),setPrefix:n.Action("Router Set Title"),setSuffix:n.Action("Router Set Title"),setSeparator:n.Action("Router Set Title")},A=n.Store({prefix:"",suffix:"",separator:"|",text:"Radi"}).on(m.setText,
function(a,b){return Object.assign({},a,{text:b})}).on(m.setPrefix,function(a,b){return Object.assign({},a,{prefix:b})}).on(m.setSuffix,function(a,b){return Object.assign({},a,{suffix:b})}).on(m.setSeparator,function(a,b){return Object.assign({},a,{separator:b})});A.subscribe(function(a){var b=a.prefix,d=a.suffix,e=a.separator;a=a.text;document.title=[].concat(a&&b?[b,e]:[b]).concat(a).concat(a&&d?[e,d]:[d]).filter(function(a){return!!a}).join(" ")});var q=new f(null,!1,"#"),J={version:"0.5.0",Title:m,
TitleStore:A,Setup:D,RouterStore:y,RouterBody:E,navigate:z,Link:F};a.version="0.5.0";a.RouterStore=y;a.Title=m;a.TitleStore=A;a.Setup=D;a.RouterBody=E;a.navigate=z;a.Link=F;a.default=J;Object.defineProperty(a,"__esModule",{value:!0})});
