var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,f){a!=Array.prototype&&a!=Object.prototype&&(a[b]=f.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(b){return $jscomp.SYMBOL_PREFIX+(b||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var f=0,g={next:function(){if(f<a.length){var e=f++;return{value:b(e,a[e]),done:!1}}g.next=function(){return{done:!0,value:void 0}};return g.next()}};g[Symbol.iterator]=function(){return g};return g};
$jscomp.polyfill=function(a,b,f,g){if(b){f=$jscomp.global;a=a.split(".");for(g=0;g<a.length-1;g++){var e=a[g];e in f||(f[e]={});f=f[e]}a=a[a.length-1];g=f[a];b=b(g);b!=g&&null!=b&&$jscomp.defineProperty(f,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");$jscomp.owns=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};
$jscomp.assign="function"==typeof Object.assign?Object.assign:function(a,b){for(var f=1;f<arguments.length;f++){var g=arguments[f];if(g)for(var e in g)$jscomp.owns(g,e)&&(a[e]=g[e])}return a};$jscomp.polyfill("Object.assign",function(a){return a||$jscomp.assign},"es6","es3");$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(a){function b(){this.batch_=null}function f(a){return a instanceof e?a:new e(function(h,b){h(a)})}if(a&&!$jscomp.FORCE_POLYFILL_PROMISE)return a;b.prototype.asyncExecute=function(a){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(a);return this};b.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var g=$jscomp.global.setTimeout;b.prototype.asyncExecuteFunction=function(a){g(a,
0)};b.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=this.batch_;this.batch_=[];for(var k=0;k<a.length;++k){var b=a[k];delete a[k];try{b()}catch(t){this.asyncThrow_(t)}}}this.batch_=null};b.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var e=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var h=this.createResolveAndReject_();try{a(h.resolve,h.reject)}catch(r){h.reject(r)}};e.prototype.createResolveAndReject_=
function(){function a(a){return function(h){e||(e=!0,a.call(b,h))}}var b=this,e=!1;return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};e.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof e)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var b=null!=a;break a;case "function":b=!0;break a;default:b=!1}b?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};e.prototype.resolveToNonPromiseObj_=function(a){var b=
void 0;try{b=a.then}catch(r){this.reject_(r);return}"function"==typeof b?this.settleSameAsThenable_(b,a):this.fulfill_(a)};e.prototype.reject_=function(a){this.settle_(2,a)};e.prototype.fulfill_=function(a){this.settle_(1,a)};e.prototype.settle_=function(a,b){if(0!=this.state_)throw Error("Cannot settle("+a+", "+b|"): Promise already settled in state"+this.state_);this.state_=a;this.result_=b;this.executeOnSettledCallbacks_()};e.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=
this.onSettledCallbacks_,b=0;b<a.length;++b)a[b].call(),a[b]=null;this.onSettledCallbacks_=null}};var v=new b;e.prototype.settleSameAsPromise_=function(a){var b=this.createResolveAndReject_();a.callWhenSettled_(b.resolve,b.reject)};e.prototype.settleSameAsThenable_=function(a,b){var e=this.createResolveAndReject_();try{a.call(b,e.resolve,e.reject)}catch(t){e.reject(t)}};e.prototype.then=function(a,b){function f(a,b){return"function"==typeof a?function(b){try{g(a(b))}catch(x){h(x)}}:b}var g,h,k=new e(function(a,
b){g=a;h=b});this.callWhenSettled_(f(a,g),f(b,h));return k};e.prototype.catch=function(a){return this.then(void 0,a)};e.prototype.callWhenSettled_=function(a,b){function e(){switch(f.state_){case 1:a(f.result_);break;case 2:b(f.result_);break;default:throw Error("Unexpected state: "+f.state_);}}var f=this;null==this.onSettledCallbacks_?v.asyncExecute(e):this.onSettledCallbacks_.push(function(){v.asyncExecute(e)})};e.resolve=f;e.reject=function(a){return new e(function(b,e){e(a)})};e.race=function(a){return new e(function(b,
e){for(var g=$jscomp.makeIterator(a),h=g.next();!h.done;h=g.next())f(h.value).callWhenSettled_(b,e)})};e.all=function(a){var b=$jscomp.makeIterator(a),g=b.next();return g.done?f([]):new e(function(a,e){function h(b){return function(e){k[b]=e;q--;0==q&&a(k)}}var k=[],q=0;do k.push(void 0),q++,f(g.value).callWhenSettled_(h(k.length-1),e),g=b.next();while(!g.done)})};return e},"es6","es3");
(function(a,b){"object"===typeof exports&&"undefined"!==typeof module?b(exports):"function"===typeof define&&define.amd?define(["exports"],b):b(a["radi-router"]={})})(this,function(a){function b(){return!("undefined"===typeof window||!window.history||!window.history.pushState)}function f(d,c,a){this.root=null;this._routes=[];this._useHash=c;this._hash="undefined"===typeof a?"#":a;this._destroyed=this._paused=!1;this._defaultHandler=this._notFoundHandler=this._lastRouteFailed=this._lastRouteResolved=
null;this._usePushState=!c&&b();this._onLocationChange=this._onLocationChange.bind(this);this._genericHooks=null;this._historyAPIUpdateMethod="pushState";d?this.root=c?d.replace(/\/$/,"/"+this._hash):d.replace(/\/$/,""):c&&(this.root=this._cLoc().split(this._hash)[0].replace(/\/$/,"/"+this._hash));this._listen();this.updatePageLinks()}function g(d){return d instanceof RegExp?d:d.replace(/\/+$/,"").replace(/^\/+/,"^/")}function e(d,a){return 0!==a.length&&d?d.slice(1,d.length).reduce(function(d,c,
b){null===d&&(d={});d[a[b]]=decodeURIComponent(c);return d},null):null}function v(d){var a=[];return{regexp:d instanceof RegExp?d:new RegExp(d.replace(f.PARAMETER_REGEXP,function(d,c,b){a.push(b);return f.REPLACE_VARIABLE_REGEXP}).replace(f.WILDCARD_REGEXP,f.REPLACE_WILDCARD)+f.FOLLOWED_BY_SLASH_REGEXP,f.MATCH_REGEXP_FLAGS),paramNames:a}}function h(d,a){return a.replace(/\/$/,"").split("/").length-d.replace(/\/$/,"").split("/").length}function k(d,a){void 0===a&&(a=[]);return a.map(function(a){var c=
v(g(a.route)),b=c.regexp;c=c.paramNames;b=d.replace(/^\/+/,"/").match(b);c=e(b,c);return b?{match:b,route:a,params:c}:!1}).filter(function(a){return a})}function r(a,c){return k(a,c)[0]||!1}function t(a,c){c=c.map(function(d){return""===d.route||"*"===d.route?a:a.split(new RegExp(d.route+"($|/)"))[0]});var d=g(a);return 1<c.length?c.reduce(function(a,d){a.length>d.length&&(a=d);return a},c[0]):1===c.length?c[0]:d}function y(a,c,n){"undefined"===typeof n&&(n="#");b()&&!c?a=a.split(/\?(.*)?$/)[0].split(n)[0]:
(a=a.split(n),a=1<a.length?a[1].split(/\?(.*)?$/)[0]:a[0].split(/\?(.*)?$/)[0]);return a}function u(a,c,b){if(c&&"object"===typeof c){if(c.before){c.before(function(d){void 0===d&&(d=!0);d&&(a(),c.after&&c.after(b))},b);return}if(c.after){a();c.after&&c.after(b);return}}a()}function C(a,c,n){if(b()&&!c||!a.match(n))return!1;a=a.split(n);return 2>a.length||""===a[1]}function q(){return p._cLoc().replace(p._getRoot(),"")||"/"}function D(){return"Access Forbidden"}function x(){return"Not Found"}function z(a,
c,b){void 0===c&&(c=[]);void 0===b&&(b={});return Object.keys(a).reduce(function(d,n){var e,f=a[n];n=c.concat(n);var g=f.children?z(f.children,n,b):{};f.children&&delete f.children;return Object.assign(d,(e={},e[("/"+n.join("/")).replace(/\/\//g,"/")]=f,e),g)},b)}f.prototype={helpers:{match:r,root:t,clean:g,getOnlyURL:y},navigate:function(a,c){a=a||"";this._usePushState?(a=(c?"":this._getRoot()+"/")+a.replace(/^\/+/,"/"),a=a.replace(/([^:])(\/{2,})/g,"$1/"),history[this._historyAPIUpdateMethod]({},
"",a),this.resolve()):"undefined"!==typeof window&&(a=a.replace(new RegExp("^"+this._hash),""),window.location.href=window.location.href.replace(/#$/,"").replace(new RegExp(this._hash+".*$"),"")+this._hash+a);return this},on:function(){for(var a=this,c=[],b=arguments.length;b--;)c[b]=arguments[b];"function"===typeof c[0]?this._defaultHandler={handler:c[0],hooks:c[1]}:2<=c.length?"/"===c[0]?(b=c[1],"object"===typeof c[1]&&(b=c[1].uses),this._defaultHandler={handler:b,hooks:c[2]}):this._add(c[0],c[1],
c[2]):"object"===typeof c[0]&&Object.keys(c[0]).sort(h).forEach(function(d){a.on(d,c[0][d])});return this},off:function(a){null!==this._defaultHandler&&a===this._defaultHandler.handler?this._defaultHandler=null:null!==this._notFoundHandler&&a===this._notFoundHandler.handler&&(this._notFoundHandler=null);this._routes=this._routes.reduce(function(c,d){d.handler!==a&&c.push(d);return c},[]);return this},notFound:function(a,c){this._notFoundHandler={handler:a,hooks:c};return this},resolve:function(a){var c=
this,d,b=(a||this._cLoc()).replace(this._getRoot(),"");this._useHash&&(b=b.replace(new RegExp("^/"+this._hash),"/"));var e=(a||this._cLoc()).split(/\?(.*)?$/).slice(1).join(""),f=y(b,this._useHash,this._hash);if(this._paused)return!1;if(this._lastRouteStopped&&this._lastRouteResolved&&f===this._lastRouteResolved.url&&e===this._lastRouteResolved.query)return this._lastRouteStopped=!0,this._lastRouteResolved.hooks&&this._lastRouteResolved.hooks.already&&this._lastRouteResolved.hooks.already(this._lastRouteResolved.params),
!1;if(d=r(f,this._routes)){this._callLeave();this._lastRouteStopped=null;this._lastRouteResolved={url:f,query:e,hooks:d.route.hooks,params:d.params,name:d.route.name};var g=d.route.handler;u(function(){u(function(){d.route.route instanceof RegExp?g.apply(void 0,d.match.slice(1,d.match.length)):g(d.params,e)},d.route.hooks,d.params,c._genericHooks)},this._genericHooks,d.params);return d}if(this._defaultHandler&&(""===f||"/"===f||f===this._hash||C(f,this._useHash,this._hash)))return u(function(){u(function(){c._callLeave();
c._lastRouteStopped=null;c._lastRouteResolved={url:f,query:e,hooks:c._defaultHandler.hooks};c._defaultHandler.handler(e)},c._defaultHandler.hooks)},this._genericHooks),!0;this._notFoundHandler&&u(function(){u(function(){c._callLeave();c._lastRouteStopped=null;c._lastRouteResolved={url:f,query:e,hooks:c._notFoundHandler.hooks};c._notFoundHandler.handler(e)},c._notFoundHandler.hooks)},this._genericHooks);return!1},destroy:function(){this._routes=[];this._destroyed=!0;this._genericHooks=this._lastRouteResolved=
null;clearTimeout(this._listeningInterval);"undefined"!==typeof window&&(window.removeEventListener("popstate",this._onLocationChange),window.removeEventListener("hashchange",this._onLocationChange))},updatePageLinks:function(){var a=this;"undefined"!==typeof document&&this._findLinks().forEach(function(c){c.hasListenerAttached||(c.addEventListener("click",function(d){if((d.ctrlKey||d.metaKey)&&"a"==d.target.tagName.toLowerCase())return!1;var b=a.getLinkPath(c);a._destroyed||(d.preventDefault(),a.navigate(b.replace(/\/+$/,
"").replace(/^\/+/,"/")))}),c.hasListenerAttached=!0)})},generate:function(a,c){void 0===c&&(c={});var d=this._routes.reduce(function(d,b){var e;if(b.name===a)for(e in d=b.route,c)d=d.toString().replace(":"+e,c[e]);return d},"");return this._useHash?this._hash+d:d},link:function(a){return this._getRoot()+a},pause:function(a){void 0===a&&(a=!0);this._historyAPIUpdateMethod=(this._paused=a)?"replaceState":"pushState"},resume:function(){this.pause(!1)},historyAPIUpdateMethod:function(a){return"undefined"===
typeof a?this._historyAPIUpdateMethod:this._historyAPIUpdateMethod=a},disableIfAPINotAvailable:function(){b()||this.destroy()},lastRouteResolved:function(){return this._lastRouteResolved},getLinkPath:function(a){return a.getAttribute("href")},hooks:function(a){this._genericHooks=a},_add:function(a,c,b){void 0===c&&(c=null);void 0===b&&(b=null);"string"===typeof a&&(a=encodeURI(a));this._routes.push("object"===typeof c?{route:a,handler:c.uses,name:c.as,hooks:b||c.hooks,tags:c.tags,title:c.title}:{route:a,
handler:c,hooks:b});return this._add},_getRoot:function(){return null!==this.root?this.root:this.root=t(this._cLoc().split("?")[0],this._routes)},_listen:function(){var a=this;if(this._usePushState)window.addEventListener("popstate",this._onLocationChange);else if("undefined"!==typeof window&&"onhashchange"in window)window.addEventListener("hashchange",this._onLocationChange);else{var c=this._cLoc(),b;var e=function(){b=a._cLoc();c!==b&&(c=b,a.resolve());a._listeningInterval=setTimeout(e,200)};e()}},
_cLoc:function(){return"undefined"!==typeof window?"undefined"!==typeof window.__NAVIGO_WINDOW_LOCATION_MOCK__?window.__NAVIGO_WINDOW_LOCATION_MOCK__:g(window.location.href):""},_findLinks:function(){return[].slice.call(document.querySelectorAll("[data-navigo]"))},_onLocationChange:function(){this.resolve()},_callLeave:function(){var a=this._lastRouteResolved;a&&a.hooks&&a.hooks.leave&&a.hooks.leave(a.params)}};f.PARAMETER_REGEXP=/([:*])(\w+)/g;f.WILDCARD_REGEXP=/\*/g;f.REPLACE_VARIABLE_REGEXP="([^/]+)";
f.REPLACE_WILDCARD="(?:.*)";f.FOLLOWED_BY_SLASH_REGEXP="(?:/$|$)";f.MATCH_REGEXP_FLAGS="";var l="undefined"!==typeof window?window.Radi:l,w=l.Action("Router Action"),A=l.Store({meta:{},params:{},component:null,tags:[],title:""}).on(w,function(a,c){return Object.assign({},a,c)}),m={setText:l.Action("Router Set Title Text"),setPrefix:l.Action("Router Set Title"),setSuffix:l.Action("Router Set Title"),setSeparator:l.Action("Router Set Title")},B=l.Store({prefix:"",suffix:"",separator:"|",text:"Radi"}).on(m.setText,
function(a,c){return Object.assign({},a,{text:c})}).on(m.setPrefix,function(a,c){return Object.assign({},a,{prefix:c})}).on(m.setSuffix,function(a,c){return Object.assign({},a,{suffix:c})}).on(m.setSeparator,function(a,c){return Object.assign({},a,{separator:c})});B.subscribe(function(a){var c=a.prefix,b=a.suffix,d=a.separator;a=a.text;document.title=[].concat(a&&c?[c,d]:[c]).concat(a).concat(a&&b?[d,b]:[b]).filter(function(a){return!!a}).join(" ")});var p=new f(null,!1,"#");a.version="0.5.0";a.RouterStore=
A;a.Title=m;a.TitleStore=B;a.Setup=function(a){function c(a,c){return function(b){return!1===b?(w({params:c.params||{},meta:c.meta||{},tags:c.tags||[],title:c.title||"",component:h}),a(!1)):a(!0)}}var b=a.routes,d=a.beforeEach,e=a.afterEach,f=a.title;void 0===f&&(f={text:"Radi",suffix:null,prefix:null,separator:null});a=a.errors;var g=a[404];void 0===g&&(g=x);var h=a[403];void 0===h&&(h=D);var k=z(b);b=Object.keys(k);f.text&&m.setText(f.text);f.suffix&&m.setSuffix(f.suffix);f.prefix&&m.setPrefix(f.prefix);
f.separator&&m.setSeparator(f.separator);p.notFound(function(a){void 0===a&&(a={});return w({params:a,component:g})});p.hooks({before:function(a,b){var e=q(),f=p.helpers.match(e,p._routes);b=Object.assign({},l[f?f.route&&f.route.route:e],{params:b});return"function"===typeof d?d(c(a,b),b):a()},after:function(a){window.scrollTo(0,0);var c=q();if("function"===typeof e)return e({path:c,params:a})}});var l={};b.reduce(function(a,b){var d=Object.assign({},k[b],{params:{}});l[b]=d;return a.on(b,function(a){void 0===
a&&(a={});var b=d.component();return w(Object.assign({},d,{params:a,component:b}))},{before:function(a,b){var e=q(),f=p.helpers.match(e,p._routes);b=Object.assign({},l[f?f.route&&f.route.route:e],Object.assign({},d.params,b));return"function"===typeof d.before?d.before(c(a,b),b):a()}})},p).resolve();return p};a.RouterBody=function(a){a=a.placeholder;void 0===a&&(a="Loading..");var b=l.Watch(A),d=b.component;b=b.title;"string"===typeof b&&m.setText(b);b&&"object"===typeof b&&(b.text&&m.setText(b.text),
b.suffix&&m.setSuffix(b.suffix),b.prefix&&m.setPrefix(b.prefix),b.separator&&m.setSeparator(b.separator));return d instanceof Promise?l.html(l.Await,{src:d,placeholder:a}):d};a.navigate=function(a){a.preventDefault();a=a.target.getAttribute("href");p.navigate(a)};Object.defineProperty(a,"__esModule",{value:!0})});
