var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,g){a!=Array.prototype&&a!=Object.prototype&&(a[b]=g.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(b){return $jscomp.SYMBOL_PREFIX+(b||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var g=0,f={next:function(){if(g<a.length){var d=g++;return{value:b(d,a[d]),done:!1}}f.next=function(){return{done:!0,value:void 0}};return f.next()}};f[Symbol.iterator]=function(){return f};return f};
$jscomp.polyfill=function(a,b,g,f){if(b){g=$jscomp.global;a=a.split(".");for(f=0;f<a.length-1;f++){var d=a[f];d in g||(g[d]={});g=g[d]}a=a[a.length-1];f=g[a];b=b(f);b!=f&&null!=b&&$jscomp.defineProperty(g,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");$jscomp.owns=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};
$jscomp.assign="function"==typeof Object.assign?Object.assign:function(a,b){for(var g=1;g<arguments.length;g++){var f=arguments[g];if(f)for(var d in f)$jscomp.owns(f,d)&&(a[d]=f[d])}return a};$jscomp.polyfill("Object.assign",function(a){return a||$jscomp.assign},"es6","es3");$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(a){function b(){this.batch_=null}function g(a){return a instanceof d?a:new d(function(l,b){l(a)})}if(a&&!$jscomp.FORCE_POLYFILL_PROMISE)return a;b.prototype.asyncExecute=function(a){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(a);return this};b.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var f=$jscomp.global.setTimeout;b.prototype.asyncExecuteFunction=function(a){f(a,
0)};b.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=this.batch_;this.batch_=[];for(var b=0;b<a.length;++b){var d=a[b];delete a[b];try{d()}catch(r){this.asyncThrow_(r)}}}this.batch_=null};b.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var d=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var b=this.createResolveAndReject_();try{a(b.resolve,b.reject)}catch(p){b.reject(p)}};d.prototype.createResolveAndReject_=
function(){function a(a){return function(l){d||(d=!0,a.call(b,l))}}var b=this,d=!1;return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};d.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof d)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var b=null!=a;break a;case "function":b=!0;break a;default:b=!1}b?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};d.prototype.resolveToNonPromiseObj_=function(a){var b=
void 0;try{b=a.then}catch(p){this.reject_(p);return}"function"==typeof b?this.settleSameAsThenable_(b,a):this.fulfill_(a)};d.prototype.reject_=function(a){this.settle_(2,a)};d.prototype.fulfill_=function(a){this.settle_(1,a)};d.prototype.settle_=function(a,b){if(0!=this.state_)throw Error("Cannot settle("+a+", "+b|"): Promise already settled in state"+this.state_);this.state_=a;this.result_=b;this.executeOnSettledCallbacks_()};d.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=
this.onSettledCallbacks_,b=0;b<a.length;++b)a[b].call(),a[b]=null;this.onSettledCallbacks_=null}};var t=new b;d.prototype.settleSameAsPromise_=function(a){var b=this.createResolveAndReject_();a.callWhenSettled_(b.resolve,b.reject)};d.prototype.settleSameAsThenable_=function(a,b){var d=this.createResolveAndReject_();try{a.call(b,d.resolve,d.reject)}catch(r){d.reject(r)}};d.prototype.then=function(a,b){function g(a,b){return"function"==typeof a?function(b){try{f(a(b))}catch(v){h(v)}}:b}var f,h,l=new d(function(a,
b){f=a;h=b});this.callWhenSettled_(g(a,f),g(b,h));return l};d.prototype.catch=function(a){return this.then(void 0,a)};d.prototype.callWhenSettled_=function(a,b){function d(){switch(g.state_){case 1:a(g.result_);break;case 2:b(g.result_);break;default:throw Error("Unexpected state: "+g.state_);}}var g=this;null==this.onSettledCallbacks_?t.asyncExecute(d):this.onSettledCallbacks_.push(function(){t.asyncExecute(d)})};d.resolve=g;d.reject=function(a){return new d(function(b,d){d(a)})};d.race=function(a){return new d(function(b,
d){for(var f=$jscomp.makeIterator(a),h=f.next();!h.done;h=f.next())g(h.value).callWhenSettled_(b,d)})};d.all=function(a){var b=$jscomp.makeIterator(a),f=b.next();return f.done?g([]):new d(function(a,d){function h(b){return function(d){l[b]=d;q--;0==q&&a(l)}}var l=[],q=0;do l.push(void 0),q++,g(f.value).callWhenSettled_(h(l.length-1),d),f=b.next();while(!f.done)})};return d},"es6","es3");
(function(a,b){"object"===typeof exports&&"undefined"!==typeof module?module.exports=b():"function"===typeof define&&define.amd?define(b):a["radi-router"]=b()})(this,function(){function a(){return!("undefined"===typeof window||!window.history||!window.history.pushState)}function b(c,e,b){this.root=null;this._routes=[];this._useHash=e;this._hash="undefined"===typeof b?"#":b;this._destroyed=this._paused=!1;this._defaultHandler=this._notFoundHandler=this._lastRouteFailed=this._lastRouteResolved=null;
this._usePushState=!e&&a();this._onLocationChange=this._onLocationChange.bind(this);this._genericHooks=null;this._historyAPIUpdateMethod="pushState";c?this.root=e?c.replace(/\/$/,"/"+this._hash):c.replace(/\/$/,""):e&&(this.root=this._cLoc().split(this._hash)[0].replace(/\/$/,"/"+this._hash));this._listen();this.updatePageLinks()}function g(c){return c instanceof RegExp?c:c.replace(/\/+$/,"").replace(/^\/+/,"^/")}function f(c,e){return 0!==e.length&&c?c.slice(1,c.length).reduce(function(c,a,b){null===
c&&(c={});c[e[b]]=decodeURIComponent(a);return c},null):null}function d(c){var e=[];return{regexp:c instanceof RegExp?c:new RegExp(c.replace(b.PARAMETER_REGEXP,function(c,a,d){e.push(d);return b.REPLACE_VARIABLE_REGEXP}).replace(b.WILDCARD_REGEXP,b.REPLACE_WILDCARD)+b.FOLLOWED_BY_SLASH_REGEXP,b.MATCH_REGEXP_FLAGS),paramNames:e}}function t(c,e){return e.replace(/\/$/,"").split("/").length-c.replace(/\/$/,"").split("/").length}function l(c,e){void 0===e&&(e=[]);return e.map(function(e){var a=d(g(e.route)),
b=a.regexp;a=a.paramNames;b=c.replace(/^\/+/,"/").match(b);a=f(b,a);return b?{match:b,route:e,params:a}:!1}).filter(function(c){return c})}function y(c,e){return l(c,e)[0]||!1}function p(c,e){e=e.map(function(e){return""===e.route||"*"===e.route?c:c.split(new RegExp(e.route+"($|/)"))[0]});var a=g(c);return 1<e.length?e.reduce(function(c,e){c.length>e.length&&(c=e);return c},e[0]):1===e.length?e[0]:a}function r(c,e,b){"undefined"===typeof b&&(b="#");a()&&!e?c=c.split(/\?(.*)?$/)[0].split(b)[0]:(c=
c.split(b),c=1<c.length?c[1].split(/\?(.*)?$/)[0]:c[0].split(/\?(.*)?$/)[0]);return c}function h(c,e,a){if(e&&"object"===typeof e){if(e.before){e.before(function(b){void 0===b&&(b=!0);b&&(c(),e.after&&e.after(a))},a);return}if(e.after){c();e.after&&e.after(a);return}}c()}function E(c,e,b){if(a()&&!e||!c.match(b))return!1;c=c.split(b);return 2>c.length||""===c[1]}function C(c,e){var a={},b;for(b in c)Object.prototype.hasOwnProperty.call(c,b)&&-1===e.indexOf(b)&&(a[b]=c[b]);return a}function q(){return n._cLoc().replace(n._getRoot(),
"")||"/"}function D(){return"Access Forbidden"}function v(){return"Not Found"}function z(c,e,a){void 0===e&&(e=[]);void 0===a&&(a={});return Object.keys(c).reduce(function(b,d){var w,g=c[d];d=e.concat(d);var f=g.children?z(g.children,d,a):{};g.children&&delete g.children;return Object.assign(b,(w={},w[("/"+d.join("/")).replace(/\/\//g,"/")]=g,w),f)},a)}function A(c){c=c.placeholder;void 0===c&&(c="Loading..");var a=m.watch(x),b=a.component;a=a.title;"string"===typeof a&&k.setText(a);a&&"object"===
typeof a&&(a.text&&k.setText(a.text),a.suffix&&k.setSuffix(a.suffix),a.prefix&&k.setPrefix(a.prefix),a.separator&&k.setSeparator(a.separator));return b instanceof Promise?m.html(m.Await,{src:b,placeholder:c}):b}b.prototype={helpers:{match:y,root:p,clean:g,getOnlyURL:r},navigate:function(a,e){a=a||"";this._usePushState?(a=(e?"":this._getRoot()+"/")+a.replace(/^\/+/,"/"),a=a.replace(/([^:])(\/{2,})/g,"$1/"),history[this._historyAPIUpdateMethod]({},"",a),this.resolve()):"undefined"!==typeof window&&
(a=a.replace(new RegExp("^"+this._hash),""),window.location.href=window.location.href.replace(/#$/,"").replace(new RegExp(this._hash+".*$"),"")+this._hash+a);return this},on:function(){for(var a=this,e=[],b=arguments.length;b--;)e[b]=arguments[b];"function"===typeof e[0]?this._defaultHandler={handler:e[0],hooks:e[1]}:2<=e.length?"/"===e[0]?(b=e[1],"object"===typeof e[1]&&(b=e[1].uses),this._defaultHandler={handler:b,hooks:e[2]}):this._add(e[0],e[1],e[2]):"object"===typeof e[0]&&Object.keys(e[0]).sort(t).forEach(function(c){a.on(c,
e[0][c])});return this},off:function(a){null!==this._defaultHandler&&a===this._defaultHandler.handler?this._defaultHandler=null:null!==this._notFoundHandler&&a===this._notFoundHandler.handler&&(this._notFoundHandler=null);this._routes=this._routes.reduce(function(c,b){b.handler!==a&&c.push(b);return c},[]);return this},notFound:function(a,b){this._notFoundHandler={handler:a,hooks:b};return this},resolve:function(a){var c=this,b,d=(a||this._cLoc()).replace(this._getRoot(),"");this._useHash&&(d=d.replace(new RegExp("^/"+
this._hash),"/"));var g=(a||this._cLoc()).split(/\?(.*)?$/).slice(1).join(""),f=r(d,this._useHash,this._hash);if(this._paused)return!1;if(this._lastRouteStopped&&this._lastRouteResolved&&f===this._lastRouteResolved.url&&g===this._lastRouteResolved.query)return this._lastRouteStopped=!0,this._lastRouteResolved.hooks&&this._lastRouteResolved.hooks.already&&this._lastRouteResolved.hooks.already(this._lastRouteResolved.params),!1;if(b=y(f,this._routes)){this._callLeave();this._lastRouteStopped=null;this._lastRouteResolved=
{url:f,query:g,hooks:b.route.hooks,params:b.params,name:b.route.name};var k=b.route.handler;h(function(){h(function(){b.route.route instanceof RegExp?k.apply(void 0,b.match.slice(1,b.match.length)):k(b.params,g)},b.route.hooks,b.params,c._genericHooks)},this._genericHooks,b.params);return b}if(this._defaultHandler&&(""===f||"/"===f||f===this._hash||E(f,this._useHash,this._hash)))return h(function(){h(function(){c._callLeave();c._lastRouteStopped=null;c._lastRouteResolved={url:f,query:g,hooks:c._defaultHandler.hooks};
c._defaultHandler.handler(g)},c._defaultHandler.hooks)},this._genericHooks),!0;this._notFoundHandler&&h(function(){h(function(){c._callLeave();c._lastRouteStopped=null;c._lastRouteResolved={url:f,query:g,hooks:c._notFoundHandler.hooks};c._notFoundHandler.handler(g)},c._notFoundHandler.hooks)},this._genericHooks);return!1},destroy:function(){this._routes=[];this._destroyed=!0;this._genericHooks=this._lastRouteResolved=null;clearTimeout(this._listeningInterval);"undefined"!==typeof window&&(window.removeEventListener("popstate",
this._onLocationChange),window.removeEventListener("hashchange",this._onLocationChange))},updatePageLinks:function(){var a=this;"undefined"!==typeof document&&this._findLinks().forEach(function(b){b.hasListenerAttached||(b.addEventListener("click",function(c){if((c.ctrlKey||c.metaKey)&&"a"==c.target.tagName.toLowerCase())return!1;var e=a.getLinkPath(b);a._destroyed||(c.preventDefault(),a.navigate(e.replace(/\/+$/,"").replace(/^\/+/,"/")))}),b.hasListenerAttached=!0)})},generate:function(a,b){void 0===
b&&(b={});var c=this._routes.reduce(function(c,e){var d;if(e.name===a)for(d in c=e.route,b)c=c.toString().replace(":"+d,b[d]);return c},"");return this._useHash?this._hash+c:c},link:function(a){return this._getRoot()+a},pause:function(a){void 0===a&&(a=!0);this._historyAPIUpdateMethod=(this._paused=a)?"replaceState":"pushState"},resume:function(){this.pause(!1)},historyAPIUpdateMethod:function(a){return"undefined"===typeof a?this._historyAPIUpdateMethod:this._historyAPIUpdateMethod=a},disableIfAPINotAvailable:function(){a()||
this.destroy()},lastRouteResolved:function(){return this._lastRouteResolved},getLinkPath:function(a){return a.getAttribute("href")},hooks:function(a){this._genericHooks=a},_add:function(a,b,d){void 0===b&&(b=null);void 0===d&&(d=null);"string"===typeof a&&(a=encodeURI(a));this._routes.push("object"===typeof b?{route:a,handler:b.uses,name:b.as,hooks:d||b.hooks,tags:b.tags,title:b.title}:{route:a,handler:b,hooks:d});return this._add},_getRoot:function(){return null!==this.root?this.root:this.root=p(this._cLoc().split("?")[0],
this._routes)},_listen:function(){var a=this;if(this._usePushState)window.addEventListener("popstate",this._onLocationChange);else if("undefined"!==typeof window&&"onhashchange"in window)window.addEventListener("hashchange",this._onLocationChange);else{var b=this._cLoc(),d;var g=function(){d=a._cLoc();b!==d&&(b=d,a.resolve());a._listeningInterval=setTimeout(g,200)};g()}},_cLoc:function(){return"undefined"!==typeof window?"undefined"!==typeof window.__NAVIGO_WINDOW_LOCATION_MOCK__?window.__NAVIGO_WINDOW_LOCATION_MOCK__:
g(window.location.href):""},_findLinks:function(){return[].slice.call(document.querySelectorAll("[data-navigo]"))},_onLocationChange:function(){this.resolve()},_callLeave:function(){var a=this._lastRouteResolved;a&&a.hooks&&a.hooks.leave&&a.hooks.leave(a.params)}};b.PARAMETER_REGEXP=/([:*])(\w+)/g;b.WILDCARD_REGEXP=/\*/g;b.REPLACE_VARIABLE_REGEXP="([^/]+)";b.REPLACE_WILDCARD="(?:.*)";b.FOLLOWED_BY_SLASH_REGEXP="(?:/$|$)";b.MATCH_REGEXP_FLAGS="";var m="undefined"!==typeof window?window.Radi:m,u=m.action("Router Action"),
x=m.store({path:"/",meta:{},params:{},component:null,tags:[],title:""}).on(u,function(a,b){return Object.assign({},a,b)}),k={setText:m.action("Router Set Title Text"),setPrefix:m.action("Router Set Title"),setSuffix:m.action("Router Set Title"),setSeparator:m.action("Router Set Title")},B=m.store({prefix:"",suffix:"",separator:"|",text:"Radi"}).on(k.setText,function(a,b){return Object.assign({},a,{text:b})}).on(k.setPrefix,function(a,b){return Object.assign({},a,{prefix:b})}).on(k.setSuffix,function(a,
b){return Object.assign({},a,{suffix:b})}).on(k.setSeparator,function(a,b){return Object.assign({},a,{separator:b})});B.subscribe(function(a){var b=a.prefix,c=a.suffix,d=a.separator;a=a.text;document.title=[].concat(a&&b?[b,d]:[b]).concat(a).concat(a&&c?[d,c]:[c]).filter(function(a){return!!a}).join(" ")});var n=new b(null,!1,"#");return{version:"0.5.0",Title:k,TitleStore:B,Setup:function(a){function b(a,b){return function(c){return!1===c?(u({path:b.path||"/",params:b.params||{},meta:b.meta||{},tags:b.tags||
[],title:b.title||"",component:l}),a(!1)):a(!0)}}var c=a.routes,d=a.beforeEach,g=a.afterEach,f=a.title;void 0===f&&(f={text:"Radi",suffix:null,prefix:null,separator:null});a=a.errors;var h=a[404];void 0===h&&(h=v);var l=a[403];void 0===l&&(l=D);var m=z(c);c=Object.keys(m);f.text&&k.setText(f.text);f.suffix&&k.setSuffix(f.suffix);f.prefix&&k.setPrefix(f.prefix);f.separator&&k.setSeparator(f.separator);n.notFound(function(a){void 0===a&&(a={});return u({params:a,component:h})});n.hooks({before:function(a,
c){var e=q(),f=n.helpers.match(e,n._routes);e=f?f.route&&f.route.route:e;c=Object.assign({path:e},p[e],{params:c});return"function"===typeof d?d(b(a,c),c):a()},after:function(a){window.scrollTo(0,0);var b=q();if("function"===typeof g)return g({path:b,params:a})}});var p={};c.reduce(function(a,c){var d=Object.assign({},m[c],{path:c,params:{}});p[c]=d;return a.on(c,function(a){void 0===a&&(a={});var b=d.component();return u(Object.assign({},d,{params:a,component:b}))},{before:function(a,c){var e=q(),
f=n.helpers.match(e,n._routes);e=f?f.route&&f.route.route:e;c=Object.assign({path:e},p[e],Object.assign({},d.params,c));return"function"===typeof d.before?d.before(b(a,c),c):a()}})},n).resolve();return n},RouterStore:x,RouterBody:A,Body:A,navigate:n.navigate,Link:function(a){var b=a.children,c=a.onclick,d=a.active;void 0===d&&(d="strict");var f=C(a,["children","onclick","active"]);return m.html("a",Object.assign({},f,{onclick:function(a){a.preventDefault();var b=a.target.getAttribute("href");n.navigate(b);
return"function"===typeof c&&c(a)},onmount:function(b){if(!d||"none"===d)return!1;var c=b.target;x.subscribe(function(b){"loose"===d&&(new RegExp("^"+a.href)).test(b.path)||"strict"===d&&a.href===b.path?c.classList.add("active"):c.classList.remove("active")})}}),b)}}});
