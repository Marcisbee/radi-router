var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,e){a!=Array.prototype&&a!=Object.prototype&&(a[b]=e.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(b){return $jscomp.SYMBOL_PREFIX+(b||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var e=0,d={next:function(){if(e<a.length){var c=e++;return{value:b(c,a[c]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};
$jscomp.polyfill=function(a,b,e,d){if(b){e=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var c=a[d];c in e||(e[c]={});e=e[c]}a=a[a.length-1];d=e[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(e,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");$jscomp.owns=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};
$jscomp.assign="function"==typeof Object.assign?Object.assign:function(a,b){for(var e=1;e<arguments.length;e++){var d=arguments[e];if(d)for(var c in d)$jscomp.owns(d,c)&&(a[c]=d[c])}return a};$jscomp.polyfill("Object.assign",function(a){return a||$jscomp.assign},"es6","es3");$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(a){function b(){this.batch_=null}function e(a){return a instanceof c?a:new c(function(g,c){g(a)})}if(a&&!$jscomp.FORCE_POLYFILL_PROMISE)return a;b.prototype.asyncExecute=function(a){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(a);return this};b.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var d=$jscomp.global.setTimeout;b.prototype.asyncExecuteFunction=function(a){d(a,
0)};b.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=this.batch_;this.batch_=[];for(var k=0;k<a.length;++k){var c=a[k];delete a[k];try{c()}catch(n){this.asyncThrow_(n)}}}this.batch_=null};b.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var c=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var g=this.createResolveAndReject_();try{a(g.resolve,g.reject)}catch(h){g.reject(h)}};c.prototype.createResolveAndReject_=
function(){function a(a){return function(g){b||(b=!0,a.call(c,g))}}var c=this,b=!1;return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};c.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof c)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var g=null!=a;break a;case "function":g=!0;break a;default:g=!1}g?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};c.prototype.resolveToNonPromiseObj_=function(a){var c=
void 0;try{c=a.then}catch(h){this.reject_(h);return}"function"==typeof c?this.settleSameAsThenable_(c,a):this.fulfill_(a)};c.prototype.reject_=function(a){this.settle_(2,a)};c.prototype.fulfill_=function(a){this.settle_(1,a)};c.prototype.settle_=function(a,c){if(0!=this.state_)throw Error("Cannot settle("+a+", "+c|"): Promise already settled in state"+this.state_);this.state_=a;this.result_=c;this.executeOnSettledCallbacks_()};c.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=
this.onSettledCallbacks_,c=0;c<a.length;++c)a[c].call(),a[c]=null;this.onSettledCallbacks_=null}};var x=new b;c.prototype.settleSameAsPromise_=function(a){var c=this.createResolveAndReject_();a.callWhenSettled_(c.resolve,c.reject)};c.prototype.settleSameAsThenable_=function(a,c){var b=this.createResolveAndReject_();try{a.call(c,b.resolve,b.reject)}catch(n){b.reject(n)}};c.prototype.then=function(a,b){function d(a,c){return"function"==typeof a?function(c){try{e(a(c))}catch(r){g(r)}}:c}var e,g,k=new c(function(a,
c){e=a;g=c});this.callWhenSettled_(d(a,e),d(b,g));return k};c.prototype.catch=function(a){return this.then(void 0,a)};c.prototype.callWhenSettled_=function(a,c){function b(){switch(d.state_){case 1:a(d.result_);break;case 2:c(d.result_);break;default:throw Error("Unexpected state: "+d.state_);}}var d=this;null==this.onSettledCallbacks_?x.asyncExecute(b):this.onSettledCallbacks_.push(function(){x.asyncExecute(b)})};c.resolve=e;c.reject=function(a){return new c(function(c,b){b(a)})};c.race=function(a){return new c(function(c,
b){for(var d=$jscomp.makeIterator(a),g=d.next();!g.done;g=d.next())e(g.value).callWhenSettled_(c,b)})};c.all=function(a){var b=$jscomp.makeIterator(a),d=b.next();return d.done?e([]):new c(function(a,c){function g(c){return function(b){k[c]=b;h--;0==h&&a(k)}}var k=[],h=0;do k.push(void 0),h++,e(d.value).callWhenSettled_(g(k.length-1),c),d=b.next();while(!d.done)})};return c},"es6","es3");
(function(a,b){"object"===typeof exports&&"undefined"!==typeof module?b(exports):"function"===typeof define&&define.amd?define(["exports"],b):b(a["radi-router"]={})})(this,function(a){var b=function(a,b){function c(a){return"function"===typeof a?c(a()):"object"===typeof a&&a.default?c(a.default):a}function d(a,c){if(null!==a||"undefined"!==typeof c){var b=m.routes[a],f="object"===typeof b?b.component:b;if(("undefined"===typeof f||"number"===typeof f||!f)&&"undefined"===typeof b)return m.config.errors[f||
404]();if("string"===typeof b.redirect)return A(b.redirect);var l=[m.before||null,b.before||null].filter(function(a){return"function"===typeof a});if(0<l.length){var d=function(b,z){var e=l.pop();return"function"!==typeof e?b(f):e(a,c,function(a){return"undefined"===typeof a||!0===a?0<l.length?d(b,z):b(f):a?0<l.length?d(b,z):b(a):b(m.config.errors[403]())})};return new Promise(d)}return f}}function e(a){var b=a.placeholder,f=a.waitMs;return w(function(a){var l=a.route;a=new Promise(function(a){var b=
c(d(l));b instanceof Promise?b.then(a):a(b)});return k("await",{src:a,placeholder:b,waitMs:f})})}var k=a.h,h=a.Subscribe,n=a.Service,u=a.Store;a=a.customAttribute;void 0===b&&(b=[]);b||console.warn("[Radi:Router] Routes should be set as a second parameter");var m={},v,q,y,r,A=function(a){window.location.hash=a;return!0},B=function(a){for(var b in a)if(a.hasOwnProperty(b)&&a[b].children){var c=B(a[b].children),f;for(f in c)c.hasOwnProperty(f)&&(a[b+f]=c[f])}return a},C=function(a,b,c,d){var f=a.split(/[\?&]/).slice(1).map(function(a){return a.split("\x3d")}).reduce(function(a,
b){var c;return Object.assign(a,(c={},c[b[0]]=b[1],c))},{}),l=a.match(b[0]);this.path=a;this.key=d;this.query=f;this.cmp=c[d]||{};this.params=this.cmp.data||{};for(a=0;a<b[1].length;a++)this.params[b[1][a]]=l[a+1]},D=function(){for(var a=[],b=arguments.length;b--;)a[b]=arguments[b];return a.reduce(function(a,b){return b?a.concat(b):a},[])};h=(new h(window)).on("hashchange",function(a){return{hash:location.hash.substr(1)||"/"}});var w=(new u({route:h({hash:location.hash.substr(1)||"/"}).map(function(a){return a.hash}),
params:{},query:{},current:{title:null,tags:[],meta:{}}})).map(function(a,b){b=window.location.hash.substr(1)||"/";if(y===b)var c=r;else{v||(v=Object.keys(m.routes));if(!q){c=v;var d=c.length,f=Array(d);for(--d;0<=d;d--){var e=d;var l=c[d].split("/");for(var g=[],k=[],h=0;h<l.length;h++)58===l[h].charCodeAt(0)?(g.push("([^/]+?)"),k.push(l[h].substr(1))):""!==l[h]&&g.push(l[h]);l=[new RegExp("^/"+g.join("/")+"(?:[/])?(?:[?\x26].*)?$","i"),k];f[e]=l}q=f}c=!1;for(f=0;f<q.length;f++)if(q[f][0].test(b)){r=
new C(b,q[f],m.routes,v[f]);c=!0;break}y=b;c=c?r:{key:null}}c=c||{};window.scrollTo(0,0);f=c.cmp&&c.cmp.title;d=a.route.split("#");return{route:d[0],hash:d[1],last:a.active,location:b,params:c.params||{},query:c.query||{},active:c.key||"",current:{title:"object"===typeof f?f:{text:f},tags:c.cmp&&c.cmp.tags||[],meta:c.cmp&&c.cmp.meta||{}}}});a("href",function(a,b){return"#"===b[0]?w(function(a){return"#"+a.route+b}):"#"+b},{allowedTags:["a"],addToElement:!0});var t=new u({prefix:null,text:null,suffix:null,
seperator:" | "}),E=function(a,b){return{prefix:b}},F=function(a,b){return{suffix:b}},G=function(a,b){return{text:b}},H=function(a,b){return{seperator:b}},p=function(){this.state=t};p.prototype.setPrefix=function(a){return t.dispatch(E,a)};p.prototype.setSuffix=function(a){return t.dispatch(F,a)};p.prototype.set=function(a){return t.dispatch(G,a)};p.prototype.setSeperator=function(a){return t.dispatch(H,a)};p.prototype.onUpdate=function(){var a=(this.$router.getTitle()||{}).text||b.title&&b.title.text||
this.state.text,c=D(b.title&&b.title.prefix||this.state.prefix,a,b.title&&b.title.suffix||this.state.suffix).join(this.state.seperator);c&&document.title!==c&&(document.title=c);this.state.text&&a!==this.state.text&&this.set(null)};u=b.beforeEach;h=b.afterEach;a=function(a,c){var d=b.errors&&b.errors[a];return d?"function"===typeof d?d:function(){return d}:c};m={config:{errors:{404:a(404,function(){return k("div",{},"Error 404: Not Found")}),403:a(403,function(){return k("div",{},"Error 403: Forbidden")})}},
before:u,after:h,routes:B(b.routes),write:A,Router:e};n.add("routerStore",function(){return w});n.add("Title",function(){return new p});n.add("Router",function(){return e});return m};window&&(window.RadiRouter=b);a.version="0.5.0";a.default=b;Object.defineProperty(a,"__esModule",{value:!0})});
