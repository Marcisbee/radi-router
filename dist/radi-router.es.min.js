let version='0.2.3';var index=({r:e,l:r,mount:t,headless:n,component:o},u)=>{let c={},s=58,i=47;var a,l,h,f;let d=e=>{var r=e.split('/'),t=[],n=[];for(var o=0;o<r.length;o++)s===r[o].charCodeAt(0)?(t.push('([^/]+?)'),n.push(r[o].substr(1))):r[o]!==''&&t.push(r[o]);return[new RegExp('^/'+t.join('/')+'(?:[/])?(?:[?&].*)?$','i'),n]},p=e=>{var r=e.length,t=new Array(r);for(var n=r-1;n>=0;n--)t[n]=d(e[n]);return t},b=e=>{return c.config.errors[e]()},g=e=>{window.location.hash=e;return!0},m=(e,r,t,n,o,u,s)=>{return e(t,n,e=>{if(typeof e==='undefined'||e===!0){if(typeof s==='function'){return m(s,r,t,n,o,u,null)}else o({default:r})}else if(typeof e==='string'&&e.charCodeAt(0)===i){g(e);return u()}else o({default:b(403)});c.after&&c.after(t,n)})},v=e=>{if(h===e)return f;a||(a=Object.keys(c.routes));l||(l=p(a));var r=!1;for(var t=0;t<l.length;t++){if(l[t][0].test(e)){f=new C(e,l[t],c.routes,a[t]);r=!0;break}}h=e;return!r?{key:null}:f};class C{constructor(e,r,t,n){let o=e.split(/[\?\&]/).slice(1).map(e=>e.split('=')).reduce((e,r)=>Object.assign(e,{[r[0]]:r[1]}),{});var u=e.match(r[0]);this.path=e;this.key=n;this.query=o;this.cmp=t[n];this.params=this.cmp.data||{};for(var c=0;c<r[1].length;c++)this.params[r[1][c]]=u[c+1]}}let y=o({name:'HeadlessRouter',state:{location:window.location.hash.substr(1)||'/',params:{},query:{},last:null,active:null},actions:{onMount(e){window.onhashchange=()=>this.hashChange(e);this.hashChange(e)},hashChange(e){e.last=e.active;e.location=window.location.hash.substr(1)||'/';var r=v(e.location);e.params=r.params||{};e.query=r.query||{};e.active=r.key||'';console.log('[radi-router] Route change',r,e.location)}}}),w=o({name:'RouterLink',props:{to:'/',active:'active',class:'',title:null},view(t){return e('a',{href:r(t,'to').process(e=>'#'.concat(e)),class:r(t,'to').process(e=>r(t.$router,'active').process(n=>r(t,'class').process(r=>(n===e?'active':'')+' '+r))),title:r(t,'title')},...t.children)}}),A=o({name:'Router',actions:{inject({active:r,last:t}){let n=c.routes[r],o=typeof n==='object'?n.component:n;if((typeof o==='undefined'||typeof o==='number'||!o)&&typeof n==='undefined')return b(o||404);if(typeof n.redirect==='string')return g(n.redirect);if(typeof c.before==='function'||typeof n.before==='function'){return()=>new Promise((e,u)=>{typeof c.before==='function'?m(c.before,o,r,t,e,u,n.before):typeof n.before==='function'&&m(n.before,o,r,t,e,u,null)})}if(typeof o==='function'){if(o.isComponent&&o.isComponent())return e(o);return o}return o}},view(t){return e('div',{},r(t.$router,'active').process(()=>t.inject(t.$router)),...t.children)}}),R=u.beforeEach,$=u.afterEach;c={config:{errors:{404:()=>e('div',{},'Error 404: Not Found'),403:()=>e('div',{},'Error 403: Forbidden')}},before:R,after:$,routes:u.routes,write:g,Link:w,Router:A};n('router',y);return c};export default index;export { version }