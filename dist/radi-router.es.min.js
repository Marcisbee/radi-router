let version='0.2.2';var index=({r:e,l:r,mount:n,headless:t,component:o},u)=>{let c={},i=58,s=47;var a,h,l,f;let d=e=>{var r=e.split('/'),n=[],t=[];for(var o=0;o<r.length;o++)i===r[o].charCodeAt(0)?(n.push('([^/]+?)'),t.push(r[o].substr(1))):r[o]!==''&&n.push(r[o]);return[new RegExp('^/'+n.join('/')+'(?:[/])?(?:[?&].*)?$','i'),t]},p=e=>{var r=e.length,n=new Array(r);for(var t=r-1;t>=0;t--)n[t]=d(e[t]);return n},b=e=>{return c.config.errors[e]()},g=e=>{window.location.hash=e;return!0},m=(e,r,n,t,o,u,i)=>{return e(n,t,e=>{if(typeof e==='undefined'||e===!0){if(typeof i==='function'){return m(i,r,n,t,o,u,null)}else o({default:r})}else if(typeof e==='string'&&e.charCodeAt(0)===s){g(e);return u()}else o({default:b(403)});c.after&&c.after(n,t)})},v=e=>{if(l===e)return f;a||(a=Object.keys(c.routes));h||(h=p(a));var r=!1;for(var n=0;n<h.length;n++){if(h[n][0].test(e)){f=new C(e,h[n],c.routes,a[n]);r=!0;break}}l=e;return!r?{key:null}:f};class C{constructor(e,r,n,t){let o=e.split(/[\?\&]/).slice(1).map(e=>e.split('=')).reduce((e,r)=>Object.assign(e,{[r[0]]:r[1]}),{});var u=e.match(r[0]);this.path=e;this.key=t;this.query=o;this.cmp=n[t];this.params=this.cmp.data||{};for(var c=0;c<r[1].length;c++)this.params[r[1][c]]=u[c+1]}}let y=o({name:'HeadlessRouter',state:{location:window.location.hash.substr(1)||'/',params:{},query:{},last:null,active:null},actions:{onMount(e){window.onhashchange=()=>this.hashChange(e);this.hashChange(e)},hashChange(e){e.last=e.active;e.location=window.location.hash.substr(1)||'/';var r=v(e.location);e.params=r.params||{};e.query=r.query||{};e.active=r.key||'';console.log('[radi-router] Route change',r,e.location)}}}),w=o({name:'RouterLink',props:{to:'/',active:'active'},view(n){return e('a',{href:r(n,'to').process(e=>'#'.concat(e)),class:r(n,'to').process(e=>r(n.$router,'active').process(r=>r===e?'active':''))},...n.children)}}),A=o({name:'Router',actions:{inject({active:r,last:n}){let t=c.routes[r],o=typeof t==='object'?t.component:t;if((typeof o==='undefined'||typeof o==='number'||!o)&&typeof t==='undefined')return b(o||404);if(typeof t.redirect==='string')return g(t.redirect);if(typeof c.before==='function'||typeof t.before==='function'){return()=>new Promise((e,u)=>{typeof c.before==='function'?m(c.before,o,r,n,e,u,t.before):typeof t.before==='function'&&m(t.before,o,r,n,e,u,null)})}if(typeof o==='function'){if(o.isComponent&&o.isComponent())return e(o);return o}return o}},view(n){return e('div',{},r(n.$router,'active').process(()=>n.inject(n.$router)),...n.children)}}),R=u.beforeEach,$=u.afterEach;c={config:{errors:{404:()=>e('div',{},'Error 404: Not Found'),403:()=>e('div',{},'Error 403: Forbidden')}},before:R,after:$,routes:u.routes,write:g,Link:w,Router:A};t('router',y);return c};export default index;export { version }