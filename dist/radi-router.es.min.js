let version='0.3.4';var index=({r:e,l:t,mount:r,headless:n,Component:o},s)=>{let u={},a=58,c=47;var i,l,h,f;let d=e=>{var t=e.split('/'),r=[],n=[];for(var o=0;o<t.length;o++)a===t[o].charCodeAt(0)?(r.push('([^/]+?)'),n.push(t[o].substr(1))):t[o]!==''&&r.push(t[o]);return[new RegExp('^/'+r.join('/')+'(?:[/])?(?:[?&].*)?$','i'),n]},p=e=>{var t=e.length,r=new Array(t);for(var n=t-1;n>=0;n--)r[n]=d(e[n]);return r},g=e=>{return u.config.errors[e]()},b=e=>{window.location.hash=e;return!0},m=(e,t,r,n,o,s,a,i)=>{return e.call(i,r,n,e=>{if(typeof e==='undefined'||e===!0){if(typeof a==='function'){return m(a,t,r,n,o,s,null,i)}else o(t)}else if(typeof e==='string'&&e.charCodeAt(0)===c){b(e);return s()}else o(g(403));u.after&&u.after(r,n)})},w=e=>{let t=e;for(let n in e){if(e.hasOwnProperty(n)&&e[n].children){let o=w(e[n].children);for(var r in o)o.hasOwnProperty(r)&&(t[n+r]=o[r])}}return t},C=e=>{if(h===e)return f;i||(i=Object.keys(u.routes));l||(l=p(i));var t=!1;for(var r=0;r<l.length;r++){if(l[r][0].test(e)){f=new v(e,l[r],u.routes,i[r]);t=!0;break}}h=e;return!t?{key:null}:f};class v{constructor(e,t,r,n){let o=e.split(/[\?\&]/).slice(1).map(e=>e.split('=')).reduce((e,t)=>Object.assign(e,{[t[0]]:t[1]}),{});var s=e.match(t[0]);this.path=e;this.key=n;this.query=o;this.cmp=r[n];this.params=this.cmp.data||{};for(var u=0;u<t[1].length;u++)this.params[t[1][u]]=s[u+1]}}class y extends o{state(){return{location:window.location.hash.substr(1)||'/',params:{},query:{},last:null,active:null,activeComponent:null}}on(){return{mount(){window.onhashchange=()=>this.setState(this.hashChange());this.setState(this.hashChange())}}}hashChange(){var e=window.location.hash.substr(1)||'/',t=C(e);window.scrollTo(0,0);this.resolve(this.inject(t.key||'',this.state.active));return{last:this.state.active,location:e,params:t.params||{},query:t.query||{},active:t.key||''}}resolve(e){if(typeof e==='function'){return this.resolve(e())}if(e instanceof Promise){return e.then(()=>{}).catch(console.warn)}this.setState({activeComponent:e})}inject(t,r){let n=u.routes[t],o=typeof n==='object'?n.component:n;if((typeof o==='undefined'||typeof o==='number'||!o)&&typeof n==='undefined')return g(o||404);if(typeof n.redirect==='string')return b(n.redirect);if(typeof u.before==='function'||typeof n.before==='function'){return()=>new Promise((e,s)=>{let a=e=>t=>{t&&t.default?this.setState({activeComponent:t.default}):this.setState({activeComponent:t}),e(t)};typeof u.before==='function'?m(u.before,o,t,r,a(e),a(s),n.before,this):typeof n.before==='function'&&m(n.before,o,t,r,a(e),a(s),null,this)})}if(typeof o==='function'){if(o.isComponent&&o.isComponent())return e(o);return o}return o}}class A extends o{state(){return{to:'/',active:'active',core:!1,class:'',id:null,title:null}}view(){return e('a',{href:t(this,'to').process(e=>'#'.concat(e)),class:t(this,'to').process(e=>t(this.$router,'active').process(r=>t(this,'class').process(t=>([(r===e||this.state.core&&new RegExp('^'+e).test(r))&&this.state.active,t])))),id:t(this,'id'),title:t(this,'title')},...this.children)}}class S extends o{view(){return e('template',{},t(this.$router,'activeComponent').process(e=>e),this.children)}}let j=s.beforeEach,E=s.afterEach;u={config:{errors:{404:()=>e('div',{},'Error 404: Not Found'),403:()=>e('div',{},'Error 403: Forbidden')}},before:j,after:E,routes:w(s.routes),write:b,Link:A,Router:S};n('router',y);return u};export default index;export { version }