var version='0.5.0',RadiRouter=function(t,n){var r=t.h;t.l;t.patch;var e=t.Service,u=t.Store,o=t.customAttribute,i={},c=58;47;var f,s,l,a,p=function(t){var n=t.split('/'),r=[],e=[];for(var u=0;u<n.length;u++)c===n[u].charCodeAt(0)?(r.push('([^/]+?)'),e.push(n[u].substr(1))):n[u]!==''&&r.push(n[u]);return[new RegExp('^/'+r.join('/')+'(?:[/])?(?:[?&].*)?$','i'),e]},h=function(t){var n=t.length,r=new Array(n);for(var e=n-1;e>=0;e--)r[e]=p(t[e]);return r},d=function(t){return i.config.errors[t]()},m=function(t){window.location.hash=t;return!0},g=function(t){var n=t;for(var r in t){if(t.hasOwnProperty(r)&&t[r].children){var e=g(t[r].children);for(var u in e)e.hasOwnProperty(u)&&(n[r+u]=e[u])}}return n},w=function(t){if(l===t){return a}console.log(i,n);f||(f=Object.keys(i.routes));s||(s=h(f));var r=!1;for(var e=0;e<s.length;e++){if(s[e][0].test(t)){a=new b(t,s[e],i.routes,f[e]);r=!0;break}}l=t;return!r?{key:null}:a},b=function(t,n,r,e){var u=this,o=t.split(/[\?\&]/).slice(1).map(function(t){return t.split('=')}).reduce(function(t,n){var r;return Object.assign(t,(r={}, r[n[0]]=n[1], r))},{}),i=t.match(n[0]);this.path=t;this.key=e;this.query=o;this.cmp=r[e]||{};this.params=this.cmp.data||{};for(var c=0;c<n[1].length;c++)u.params[n[1][c]]=i[c+1]},y=function(){var t=[],n=arguments.length;while(n--)t[n]=arguments[n];return(t.reduce(function(t,n){return n?t.concat(n):t},[]))},x=function(){return location.hash.substr(1)||'/'},j=new Subscribe(window).on('hashchange',function(t){return({hash:x()})}),v=new u({route:j({hash:x()}).map(function(t){var n=t.hash;return n}),params:{},query:{},current:{title:null,tags:[],meta:{}}}).map(function(t,n){n===void 0&&(n={});var r=window.location.hash.substr(1)||'/',e=w(r)||{};window.scrollTo(0,0);var u=e.cmp&&e.cmp.title,o=t.route.split('#');return{route:o[0],hash:o[1],last:t.active,location:r,params:e.params||{},query:e.query||{},active:e.key||'',current:{title:typeof u==='object'?u:{text:u}||null,tags:e.cmp&&e.cmp.tags||[],meta:e.cmp&&e.cmp.meta||{}}}});o('href',function(t,n){if(n[0]==='#'){return v(function(t){var r=t.route;return'#'+r+n})}return'#'+n},{allowedTags:['a'],addToElement:!0});function A(t){if(typeof t==='function'){return A(t())}return t}function S(t,n){if(t===null&&typeof n==='undefined'){return}var r=i.routes[t],e=typeof r==='object'?r.component:r;if((typeof e==='undefined'||typeof e==='number'||!e)&&typeof r==='undefined'){return d(e||404)}if(typeof r.redirect==='string'){return m(r.redirect)}var u=[i.before||null,r.before||null].filter(function(t){return typeof t==='function'});if(u.length>0){var o=function(r,i){var c=u.pop();if(typeof c!=='function'){return r(e)}return c(t,n,function(t){if(typeof t==='undefined'||t===!0){if(u.length>0){return o(r,i)}else{return r(e)}}if(t){if(u.length>0){return o(r,i)}else{return r(t)}}return r(d(403))})};return new Promise(o)}return e}function k(t){var n=t.placeholder,e=t.waitMs;return v(function(t){t.active;var u=t.route,o=new Promise(function(t){var n=A(S(u));n instanceof Promise?n.then(function(n){return t(A(n))}):t(n)});return r('await',{src:o,placeholder:n,waitMs:e})})}var E=new u({prefix:null,text:null,suffix:null,seperator:' | '}),C=function(t,n){return({prefix:n})},P=function(t,n){return({suffix:n})},T=function(t,n){return({text:n})},q=function(t,n){return({seperator:n})},O=function(){this.state=E};O.prototype.setPrefix=function(t){return E.dispatch(C,t)};O.prototype.setSuffix=function(t){return E.dispatch(P,t)};O.prototype.set=function(t){return E.dispatch(T,t)};O.prototype.setSeperator=function(t){return E.dispatch(q,t)};O.prototype.onUpdate=function(){var t=this.$router.getTitle()||{},r=n.title&&n.title.prefix||this.state.prefix,e=t.text||n.title&&n.title.text||this.state.text,u=n.title&&n.title.suffix||this.state.suffix,o=y(r,e,u).join(this.state.seperator);o&&document.title!==o&&(document.title=o);this.state.text&&e!==this.state.text&&this.set(null)};var $=n.beforeEach,R=n.afterEach,F=function(t,r){var e=n.errors&&n.errors[t];if(e){return typeof e==='function'?e:function(){return e}}return r};i={config:{errors:{404:F(404,function(){return r('div',{},'Error 404: Not Found')}),403:F(403,function(){return r('div',{},'Error 403: Forbidden')})}},before:$,after:R,routes:g(n.routes),write:m,Router:k};e.add('routerStore',function(){return v});e.add('Title',function(){return new O});e.add('Router',function(){return k});return i};window&&(window.RadiRouter=RadiRouter);export default RadiRouter;export { version }