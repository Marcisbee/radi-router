let version='0.3.27';var index=({r:t,l:e,mount:r,headless:n,Component:u},s)=>{let o={},i=58;47;var c,a,l,f;let h=t=>{var e=t.split('/'),r=[],n=[];for(var u=0;u<e.length;u++)i===e[u].charCodeAt(0)?(r.push('([^/]+?)'),n.push(e[u].substr(1))):e[u]!==''&&r.push(e[u]);return[new RegExp('^/'+r.join('/')+'(?:[/])?(?:[?&].*)?$','i'),n]},p=t=>{var e=t.length,r=new Array(e);for(var n=e-1;n>=0;n--)r[n]=h(t[n]);return r},d=t=>{return o.config.errors[t]()},g=t=>{window.location.hash=t;return!0},m=t=>{let e=t;for(let n in t){if(t.hasOwnProperty(n)&&t[n].children){let u=m(t[n].children);for(var r in u)u.hasOwnProperty(r)&&(e[n+r]=u[r])}}return e},x=t=>{if(l===t)return f;c||(c=Object.keys(o.routes));a||(a=p(c));var e=!1;for(var r=0;r<a.length;r++){if(a[r][0].test(t)){f=new b(t,a[r],o.routes,c[r]);e=!0;break}}l=t;return!e?{key:null}:f};class b{constructor(t,e,r,n){let u=t.split(/[\?\&]/).slice(1).map(t=>t.split('=')).reduce((t,e)=>Object.assign(t,{[e[0]]:e[1]}),{});var s=t.match(e[0]);this.path=t;this.key=n;this.query=u;this.cmp=r[n]||{};this.params=this.cmp.data||{};for(var o=0;o<e[1].length;o++)this.params[e[1][o]]=s[o+1]}}let w=(...t)=>(t.reduce((t,e)=>e?t.concat(e):t,[]));class C extends u{state(){return{prefix:null,text:null,suffix:null,seperator:' | '}}setPrefix(t){return this.setState({prefix:t})}setSuffix(t){return this.setState({suffix:t})}set(t){return this.setState({text:t})}setSeperator(t){return this.setState({seperator:t})}on(){return{update(){let t=this.$router.getTitle()||{},e=s.title&&s.title.prefix||this.state.prefix,r=t.text||s.title&&s.title.text||this.state.text,n=s.title&&s.title.suffix||this.state.suffix,u=w(e,r,n).join(this.state.seperator);u&&document.title!==u&&(document.title=u);this.state.text&&r!==this.state.text&&this.set(null)}}}}class v extends u{state(){return{location:window.location.hash.substr(1)||'/',params:{},query:{},last:null,active:null,activeComponent:null,current:{title:null,tags:[],meta:{}}}}on(){return{mount(){window.onhashchange=()=>(this.setState(this.hashChange()), this.chain());this.setState(this.hashChange());this.chain()}}}chain(){this.trigger('changed',this.state.active||'',this.state.last)}hashChange(){var t=window.location.hash.substr(1)||'/',e=x(t);window.scrollTo(0,0);let r=e.cmp&&e.cmp.title;return{last:this.state.active,location:t,params:e.params||{},query:e.query||{},active:e.key||'',current:{title:typeof r==='object'?r:{text:r}||null,tags:e.cmp&&e.cmp.tags||[],meta:e.cmp&&e.cmp.meta||{}}}}hasTag(...t){return t.reduce((t,e)=>t||this.state.current.tags.indexOf(e)>=0,!1)}getMeta(){return this.state.current.meta||{}}getTitle(){let t=this.state.current.title;return t}}class y extends u{state(){return{to:'/',active:'active',core:!1,class:'',id:null,title:null}}view(){return t('a',{href:e(this,'to').process(t=>'#'.concat(t)),class:e(this,'to').process(t=>e(this.$router,'active').process(r=>e(this,'class').process(e=>([(r===t||this.state.core&&new RegExp('^'+t).test(r))&&this.state.active,e])))),id:e(this,'id'),title:e(this,'title')},...this.children)}}class S extends u{state(){return{active:null}}on(){return{mount(){this.setState({active:this.$router.state.active});this.$router.when('changed',(t,e)=>{this.setState({active:t})})}}}view(){return[e(this,'active').process(t=>this.extractComponent(t)),this.children]}extractComponent(e,r){if(e===null&&typeof r==='undefined')return;let n=o.routes[e],u=typeof n==='object'?n.component:n;if((typeof u==='undefined'||typeof u==='number'||!u)&&typeof n==='undefined')return d(u||404);if(typeof n.redirect==='string')return g(n.redirect);let s=[o.before||null,n.before||null].filter(t=>typeof t==='function');if(s.length>0){let t=(n,o)=>{let i=s.pop();if(typeof i!=='function'){return n(u)}return i.call(this,e,r,e=>{if(typeof e==='undefined'||e===!0){if(s.length>0){return t(n,o)}else{return n(u)}}if(e){if(s.length>0){return t(n,o)}else{return n(e)}}return n(d(403))})};return()=>new Promise(t)}if(typeof u==='function'){if(u.isComponent&&u.isComponent())return t(u);return u}return u}}let j=s.beforeEach,$=s.afterEach,E=(t,e)=>{let r=s.errors&&s.errors[t];if(r){return typeof r==='function'?r:()=>r}return e};o={config:{errors:{404:E(404,()=>t('div',{},'Error 404: Not Found')),403:E(403,()=>t('div',{},'Error 403: Forbidden'))}},before:j,after:$,routes:m(s.routes),write:g,Link:y,Router:S};n('router',v);n('title',C);return o};export default index;export { version }