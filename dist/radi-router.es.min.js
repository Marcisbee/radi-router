let version='0.3.5';var index=({r:e,l:r,mount:t,headless:n,Component:o},u)=>{let s={},c=58;47;var a,i,l,h;let f=e=>{var r=e.split('/'),t=[],n=[];for(var o=0;o<r.length;o++)c===r[o].charCodeAt(0)?(t.push('([^/]+?)'),n.push(r[o].substr(1))):r[o]!==''&&t.push(r[o]);return[new RegExp('^/'+t.join('/')+'(?:[/])?(?:[?&].*)?$','i'),n]},p=e=>{var r=e.length,t=new Array(r);for(var n=r-1;n>=0;n--)t[n]=f(e[n]);return t},d=e=>{return s.config.errors[e]()},g=e=>{window.location.hash=e;return!0},m=e=>{let r=e;for(let n in e){if(e.hasOwnProperty(n)&&e[n].children){let o=m(e[n].children);for(var t in o)o.hasOwnProperty(t)&&(r[n+t]=o[t])}}return r},w=e=>{if(l===e)return h;a||(a=Object.keys(s.routes));i||(i=p(a));var r=!1;for(var t=0;t<i.length;t++){if(i[t][0].test(e)){h=new b(e,i[t],s.routes,a[t]);r=!0;break}}l=e;return!r?{key:null}:h};class b{constructor(e,r,t,n){let o=e.split(/[\?\&]/).slice(1).map(e=>e.split('=')).reduce((e,r)=>Object.assign(e,{[r[0]]:r[1]}),{});var u=e.match(r[0]);this.path=e;this.key=n;this.query=o;this.cmp=t[n];this.params=this.cmp.data||{};for(var s=0;s<r[1].length;s++)this.params[r[1][s]]=u[s+1]}}class C extends o{state(){return{location:window.location.hash.substr(1)||'/',params:{},query:{},last:null,active:null,activeComponent:null}}on(){return{mount(){window.onhashchange=()=>this.setState(this.hashChange());this.setState(this.hashChange())}}}hashChange(){var e=window.location.hash.substr(1)||'/',r=w(e);window.scrollTo(0,0);this.trigger('changed',r.key||'',this.state.active);return{last:this.state.active,location:e,params:r.params||{},query:r.query||{},active:r.key||''}}}class v extends o{state(){return{to:'/',active:'active',core:!1,class:'',id:null,title:null}}view(){return e('a',{href:r(this,'to').process(e=>'#'.concat(e)),class:r(this,'to').process(e=>r(this.$router,'active').process(t=>r(this,'class').process(r=>([(t===e||this.state.core&&new RegExp('^'+e).test(t))&&this.state.active,r])))),id:r(this,'id'),title:r(this,'title')},...this.children)}}class y extends o{state(){return{active:null}}on(){return{mount(){this.setState({active:this.$router.state.active});this.$router.when('changed',(e,r)=>{this.setState({active:e})})}}}view(){return[r(this,'active').process(e=>this.extractComponent(e)),this.children]}extractComponent(r,t){if(r===null&&typeof t==='undefined')return;let n=s.routes[r],o=typeof n==='object'?n.component:n;if((typeof o==='undefined'||typeof o==='number'||!o)&&typeof n==='undefined')return d(o||404);if(typeof n.redirect==='string')return g(n.redirect);let u=[s.before||null,n.before||null].filter(e=>typeof e==='function');if(u.length>0){let e=(n,s)=>{return u.pop().call(this,r,t,r=>{if(typeof r==='undefined'||r===!0){if(u.length>0){return e(n,s)}else{return n(o)}}return n(d(403))})};return()=>new Promise(e)}if(typeof o==='function'){if(o.isComponent&&o.isComponent())return e(o);return o}return o}}let E=u.beforeEach,k=u.afterEach;s={config:{errors:{404:()=>e('div',{},'Error 404: Not Found'),403:()=>e('div',{},'Error 403: Forbidden')}},before:E,after:k,routes:m(u.routes),write:g,Link:v,Router:y};n('router',C);return s};export default index;export { version }