function isPushStateAvailable(){return!!(typeof window!=="undefined"&&window.history&&window.history.pushState)}function Navigo(e,t,n){this.root=null;this._routes=[];this._useHash=t;this._hash=typeof n==="undefined"?"#":n;this._paused=!1;this._destroyed=!1;this._lastRouteResolved=null;this._lastRouteFailed=null;this._notFoundHandler=null;this._defaultHandler=null;this._usePushState=!t&&isPushStateAvailable();this._onLocationChange=this._onLocationChange.bind(this);this._genericHooks=null;this._historyAPIUpdateMethod="pushState";e?(this.root=t?e.replace(/\/$/,"/"+this._hash):e.replace(/\/$/,"")):t&&(this.root=this._cLoc().split(this._hash)[0].replace(/\/$/,"/"+this._hash));this._listen();this.updatePageLinks()}function clean(e){if(e instanceof RegExp){return e}return e.replace(/\/+$/,"").replace(/^\/+/,"^/")}function regExpResultToParams(e,t){if(t.length===0){return null}if(!e){return null}return e.slice(1,e.length).reduce(function(e,n,r){e===null&&(e={});e[t[r]]=decodeURIComponent(n);return e},null)}function replaceDynamicURLParts(e){var t=[],n;e instanceof RegExp?(n=e):(n=new RegExp(e.replace(Navigo.PARAMETER_REGEXP,function(e,n,r){t.push(r);return Navigo.REPLACE_VARIABLE_REGEXP}).replace(Navigo.WILDCARD_REGEXP,Navigo.REPLACE_WILDCARD)+Navigo.FOLLOWED_BY_SLASH_REGEXP,Navigo.MATCH_REGEXP_FLAGS));return{regexp:n,paramNames:t}}function getUrlDepth(e){return e.replace(/\/$/,"").split("/").length}function compareUrlDepth(e,t){return getUrlDepth(t)-getUrlDepth(e)}function findMatchedRoutes(e,t){t===void 0&&(t=[]);return t.map(function(t){var n=replaceDynamicURLParts(clean(t.route)),r=n.regexp,o=n.paramNames,u=e.replace(/^\/+/,"/").match(r),a=regExpResultToParams(u,o);return u?{match:u,route:t,params:a}:!1}).filter(function(e){return e})}function match(e,t){return findMatchedRoutes(e,t)[0]||!1}function root(e,t){var n=t.map(function(t){return t.route===""||t.route==="*"?e:e.split(new RegExp(t.route+"($|/)"))[0]}),r=clean(e);if(n.length>1){return n.reduce(function(e,t){e.length>t.length&&(e=t);return e},n[0])}else if(n.length===1){return n[0]}return r}function isHashChangeAPIAvailable(){return typeof window!=="undefined"&&"onhashchange" in window}function extractGETParameters(e){return e.split(/\?(.*)?$/).slice(1).join("")}function getOnlyURL(e,t,n){var r=e,o,u=function(e){return e.split(/\?(.*)?$/)[0]};typeof n==="undefined"&&(n="#");isPushStateAvailable()&&!t?(r=u(e).split(n)[0]):(o=e.split(n),r=o.length>1?u(o[1]):u(o[0]));return r}function manageHooks(e,t,n){if(t&&typeof t==="object"){if(t.before){t.before(function(r){r===void 0&&(r=!0);if(!r){return}e();t.after&&t.after(n)},n);return}else if(t.after){e();t.after&&t.after(n);return}}e()}function isHashedRoot(e,t,n){if(isPushStateAvailable()&&!t){return!1}if(!e.match(n)){return!1}var r=e.split(n);return r.length<2||r[1]===""}Navigo.prototype={helpers:{match:match,root:root,clean:clean,getOnlyURL:getOnlyURL},navigate:function(e,t){var n;e=e||"";this._usePushState?(n=(!t?this._getRoot()+"/":"")+e.replace(/^\/+/,"/"),n=n.replace(/([^:])(\/{2,})/g,"$1/"),history[this._historyAPIUpdateMethod]({},"",n),this.resolve()):typeof window!=="undefined"&&(e=e.replace(new RegExp("^"+this._hash),""),window.location.href=window.location.href.replace(/#$/,"").replace(new RegExp(this._hash+".*$"),"")+this._hash+e);return this},on:function(){var e=this,t=[],n=arguments.length;while(n--)t[n]=arguments[n];if(typeof t[0]==="function")this._defaultHandler={handler:t[0],hooks:t[1]};else if(t.length>=2){if(t[0]==="/"){var r=t[1];typeof t[1]==="object"&&(r=t[1].uses);this._defaultHandler={handler:r,hooks:t[2]}}else this._add(t[0],t[1],t[2])}else if(typeof t[0]==="object"){var o=Object.keys(t[0]).sort(compareUrlDepth);o.forEach(function(n){e.on(n,t[0][n])})}return this},off:function(e){this._defaultHandler!==null&&e===this._defaultHandler.handler?(this._defaultHandler=null):this._notFoundHandler!==null&&e===this._notFoundHandler.handler&&(this._notFoundHandler=null);this._routes=this._routes.reduce(function(t,n){n.handler!==e&&t.push(n);return t},[]);return this},notFound:function(e,t){this._notFoundHandler={handler:e,hooks:t};return this},resolve:function(e){var t=this,n,r,o=(e||this._cLoc()).replace(this._getRoot(),"");this._useHash&&(o=o.replace(new RegExp("^/"+this._hash),"/"));var u=extractGETParameters(e||this._cLoc()),a=getOnlyURL(o,this._useHash,this._hash);if(this._paused){return!1}if(this._lastRouteStopped&&this._lastRouteResolved&&a===this._lastRouteResolved.url&&u===this._lastRouteResolved.query){this._lastRouteStopped=!0;this._lastRouteResolved.hooks&&this._lastRouteResolved.hooks.already&&this._lastRouteResolved.hooks.already(this._lastRouteResolved.params);return!1}r=match(a,this._routes);if(r){this._callLeave();this._lastRouteStopped=null;this._lastRouteResolved={url:a,query:u,hooks:r.route.hooks,params:r.params,name:r.route.name};n=r.route.handler;manageHooks(function(){manageHooks(function(){r.route.route instanceof RegExp?n.apply(void 0,r.match.slice(1,r.match.length)):n(r.params,u)},r.route.hooks,r.params,t._genericHooks)},this._genericHooks,r.params);return r}else if(this._defaultHandler&&(a===""||a==="/"||a===this._hash||isHashedRoot(a,this._useHash,this._hash))){manageHooks(function(){manageHooks(function(){t._callLeave();t._lastRouteStopped=null;t._lastRouteResolved={url:a,query:u,hooks:t._defaultHandler.hooks};t._defaultHandler.handler(u)},t._defaultHandler.hooks)},this._genericHooks);return!0}else this._notFoundHandler&&manageHooks(function(){manageHooks(function(){t._callLeave();t._lastRouteStopped=null;t._lastRouteResolved={url:a,query:u,hooks:t._notFoundHandler.hooks};t._notFoundHandler.handler(u)},t._notFoundHandler.hooks)},this._genericHooks);return!1},destroy:function(){this._routes=[];this._destroyed=!0;this._lastRouteResolved=null;this._genericHooks=null;clearTimeout(this._listeningInterval);typeof window!=="undefined"&&(window.removeEventListener("popstate",this._onLocationChange),window.removeEventListener("hashchange",this._onLocationChange))},updatePageLinks:function(){var e=this;if(typeof document==="undefined"){return}this._findLinks().forEach(function(t){t.hasListenerAttached||(t.addEventListener("click",function(n){if((n.ctrlKey||n.metaKey)&&n.target.tagName.toLowerCase()=="a"){return!1}var r=e.getLinkPath(t);e._destroyed||(n.preventDefault(),e.navigate(r.replace(/\/+$/,"").replace(/^\/+/,"/")))}),t.hasListenerAttached=!0)})},generate:function(e,t){t===void 0&&(t={});var n=this._routes.reduce(function(n,r){var o;if(r.name===e){n=r.route;for(o in t)n=n.toString().replace(":"+o,t[o])}return n},"");return this._useHash?this._hash+n:n},link:function(e){return this._getRoot()+e},pause:function(e){e===void 0&&(e=!0);this._paused=e;e?(this._historyAPIUpdateMethod="replaceState"):(this._historyAPIUpdateMethod="pushState")},resume:function(){this.pause(!1)},historyAPIUpdateMethod:function(e){if(typeof e==="undefined"){return this._historyAPIUpdateMethod}this._historyAPIUpdateMethod=e;return e},disableIfAPINotAvailable:function(){isPushStateAvailable()||this.destroy()},lastRouteResolved:function(){return this._lastRouteResolved},getLinkPath:function(e){return e.getAttribute("href")},hooks:function(e){this._genericHooks=e},_add:function(e,t,n){t===void 0&&(t=null);n===void 0&&(n=null);typeof e==="string"&&(e=encodeURI(e));this._routes.push(typeof t==="object"?{route:e,handler:t.uses,name:t.as,hooks:n||t.hooks,tags:t.tags,title:t.title}:{route:e,handler:t,hooks:n});return this._add},_getRoot:function(){if(this.root!==null){return this.root}this.root=root(this._cLoc().split("?")[0],this._routes);return this.root},_listen:function(){var e=this;if(this._usePushState)window.addEventListener("popstate",this._onLocationChange);else if(isHashChangeAPIAvailable())window.addEventListener("hashchange",this._onLocationChange);else{var t=this._cLoc(),n,r;r=function(){n=e._cLoc();t!==n&&(t=n,e.resolve());e._listeningInterval=setTimeout(r,200)};r()}},_cLoc:function(){if(typeof window!=="undefined"){if(typeof window.__NAVIGO_WINDOW_LOCATION_MOCK__!=="undefined"){return window.__NAVIGO_WINDOW_LOCATION_MOCK__}return clean(window.location.href)}return""},_findLinks:function(){return[].slice.call(document.querySelectorAll("[data-navigo]"))},_onLocationChange:function(){this.resolve()},_callLeave:function(){var e=this._lastRouteResolved;e&&e.hooks&&e.hooks.leave&&e.hooks.leave(e.params)}};Navigo.PARAMETER_REGEXP=/([:*])(\w+)/g;Navigo.WILDCARD_REGEXP=/\*/g;Navigo.REPLACE_VARIABLE_REGEXP="([^/]+)";Navigo.REPLACE_WILDCARD="(?:.*)";Navigo.FOLLOWED_BY_SLASH_REGEXP="(?:/$|$)";Navigo.MATCH_REGEXP_FLAGS="";function objectWithoutProperties(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)===-1&&(n[r]=e[r]);return n}var Radi=typeof window!=='undefined'?window.Radi:Radi,version='0.5.0',RouterAction=Radi.action('Router Action'),RouterStore=Radi.store({path:'/',meta:{},params:{},component:null,tags:[],title:''}).on(RouterAction,function(e,t){return Object.assign({},e,t)}),Title={setText:Radi.action('Router Set Title Text'),setPrefix:Radi.action('Router Set Title'),setSuffix:Radi.action('Router Set Title'),setSeparator:Radi.action('Router Set Title')},TitleStore=Radi.store({prefix:'',suffix:'',separator:'|',text:'Radi'}).on(Title.setText,function(e,t){return Object.assign({},e,{text:t})}).on(Title.setPrefix,function(e,t){return Object.assign({},e,{prefix:t})}).on(Title.setSuffix,function(e,t){return Object.assign({},e,{suffix:t})}).on(Title.setSeparator,function(e,t){return Object.assign({},e,{separator:t})});TitleStore.subscribe(function(e){var t=e.prefix,n=e.suffix,r=e.separator,o=e.text;document.title=[].concat(o&&t?[t,r]:[t]).concat(o).concat(o&&n?[r,n]:[n]).filter(function(e){return!!e}).join(' ')});var root$1=null,useHash=!1,hash='#',router=new Navigo(root$1,useHash,hash);function getPath(){return router._cLoc().replace(router._getRoot(),'')||'/'}function Forbidden(){return'Access Forbidden'}function NotFound(){return'Not Found'}function spreadChildren(e,t,n){t===void 0&&(t=[]);n===void 0&&(n={});return Object.keys(e).reduce(function(r,o){var u,a=e[o],s=t.concat(o),i=a.children?spreadChildren(a.children,s,n):{};a.children&&delete a.children;return Object.assign(r,(u={}, u[('/'+s.join('/')).replace(/\/\//g,'/')]=a, u),i)},n)}function Setup(e){var t=e.routes,n=e.beforeEach,r=e.afterEach,o=e.title;o===void 0&&(o={text:'Radi',suffix:null,prefix:null,separator:null});var u=e.errors,a=u[404];a===void 0&&(a=NotFound);var s=u[403];s===void 0&&(s=Forbidden);var i=spreadChildren(t),l=Object.keys(i);function c(e,t){return function(n){if(n===!1){RouterAction({path:t.path||'/',params:t.params||{},meta:t.meta||{},tags:t.tags||[],title:t.title||'',component:s});return e(!1)}return e(!0)}}o.text&&Title.setText(o.text);o.suffix&&Title.setSuffix(o.suffix);o.prefix&&Title.setPrefix(o.prefix);o.separator&&Title.setSeparator(o.separator);router.notFound(function(e){e===void 0&&(e={});return RouterAction({params:e,component:a})});router.hooks({before:function(e,t){var r=getPath(),o=router.helpers.match(r,router._routes),u=o?o.route&&o.route.route:r,a=Object.assign({path:u},f[u],{params:t});if(typeof n==='function'){return n(c(e,a),a)}return e()},after:function(e){window.scrollTo(0,0);var t=getPath();if(typeof r==='function'){return r({path:t,params:e})}}});var f={};l.reduce(function(e,t){var n=Object.assign({},i[t],{path:t,params:{}});f[t]=n;return e.on(t,function(e){e===void 0&&(e={});var t=n.component();return RouterAction(Object.assign({},n,{params:e,component:t}))},{before:function(e,t){var r=getPath(),o=router.helpers.match(r,router._routes),u=o?o.route&&o.route.route:r,a=Object.assign({path:u},f[u],Object.assign({},n.params,t));if(typeof n.before==='function'){return n.before(c(e,a),a)}return e()}})},router).resolve();return router}function RouterBody(e){var t=e.placeholder;t===void 0&&(t='Loading..');var n=Radi.watch(RouterStore),r=n.component,o=n.title;typeof o==='string'&&Title.setText(o);o&&typeof o==='object'&&(o.text&&Title.setText(o.text),o.suffix&&Title.setSuffix(o.suffix),o.prefix&&Title.setPrefix(o.prefix),o.separator&&Title.setSeparator(o.separator));if(r instanceof Promise){return Radi.html(Radi.Await,{src:r,placeholder:t})}return r}function navigate(e){e.preventDefault();var t=e.target.getAttribute('href');router.navigate(t)}function Link(e){var t=e.children,n=e.onclick,r=e.active;r===void 0&&(r='strict');var o=objectWithoutProperties(e,["children","onclick","active"]),u=o;return Radi.html('a',Object.assign({},u,{onclick:function(e){return(navigate(e), typeof n==='function'&&n(e))},onmount:function(t){if(!r||r==='none'){return!1}var n=t.target;RouterStore.subscribe(function(t){r==='loose'&&new RegExp('^'+e.href).test(t.path)||r==='strict'&&e.href===t.path?n.classList.add('active'):n.classList.remove('active')})}}),t)}var index={version:version,Title:Title,TitleStore:TitleStore,Setup:Setup,RouterStore:RouterStore,RouterBody:RouterBody,Body:RouterBody,navigate:router.navigate,Link:Link};export default index