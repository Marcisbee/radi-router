let version='0.3.25';var index=({r:r,l:e,mount:t,headless:n,Component:u},o)=>{let s={},c=58;47;var a,i,l,h;let f=r=>{var e=r.split('/'),t=[],n=[];for(var u=0;u<e.length;u++)c===e[u].charCodeAt(0)?(t.push('([^/]+?)'),n.push(e[u].substr(1))):e[u]!==''&&t.push(e[u]);return[new RegExp('^/'+t.join('/')+'(?:[/])?(?:[?&].*)?$','i'),n]},p=r=>{var e=r.length,t=new Array(e);for(var n=e-1;n>=0;n--)t[n]=f(r[n]);return t},d=r=>{return s.config.errors[r]()},g=r=>{window.location.hash=r;return!0},m=r=>{let e=r;for(let n in r){if(r.hasOwnProperty(n)&&r[n].children){let u=m(r[n].children);for(var t in u)u.hasOwnProperty(t)&&(e[n+t]=u[t])}}return e},w=r=>{if(l===r)return h;a||(a=Object.keys(s.routes));i||(i=p(a));var e=!1;for(var t=0;t<i.length;t++){if(i[t][0].test(r)){h=new b(r,i[t],s.routes,a[t]);e=!0;break}}l=r;return!e?{key:null}:h};class b{constructor(r,e,t,n){let u=r.split(/[\?\&]/).slice(1).map(r=>r.split('=')).reduce((r,e)=>Object.assign(r,{[e[0]]:e[1]}),{});var o=r.match(e[0]);this.path=r;this.key=n;this.query=u;this.cmp=t[n]||{};this.params=this.cmp.data||{};for(var s=0;s<e[1].length;s++)this.params[e[1][s]]=o[s+1]}}class C extends u{state(){return{location:window.location.hash.substr(1)||'/',params:{},query:{},last:null,active:null,activeComponent:null,current:{tags:[],meta:{}}}}on(){return{mount(){window.onhashchange=()=>(this.setState(this.hashChange()), this.chain());this.setState(this.hashChange());this.chain()}}}chain(){this.trigger('changed',this.state.active||'',this.state.last)}hashChange(){var r=window.location.hash.substr(1)||'/',e=w(r);window.scrollTo(0,0);return{last:this.state.active,location:r,params:e.params||{},query:e.query||{},active:e.key||'',current:{tags:e.cmp&&e.cmp.tags||[],meta:e.cmp&&e.cmp.meta||{}}}}hasTag(...r){return r.reduce((r,e)=>r||this.state.current.tags.indexOf(e)>=0,!1)}getMeta(){return this.state.current.meta||{}}}class v extends u{state(){return{to:'/',active:'active',core:!1,class:'',id:null,title:null}}view(){return r('a',{href:e(this,'to').process(r=>'#'.concat(r)),class:e(this,'to').process(r=>e(this.$router,'active').process(t=>e(this,'class').process(e=>([(t===r||this.state.core&&new RegExp('^'+r).test(t))&&this.state.active,e])))),id:e(this,'id'),title:e(this,'title')},...this.children)}}class y extends u{state(){return{active:null}}on(){return{mount(){this.setState({active:this.$router.state.active});this.$router.when('changed',(r,e)=>{this.setState({active:r})})}}}view(){return[e(this,'active').process(r=>this.extractComponent(r)),this.children]}extractComponent(e,t){if(e===null&&typeof t==='undefined')return;let n=s.routes[e],u=typeof n==='object'?n.component:n;if((typeof u==='undefined'||typeof u==='number'||!u)&&typeof n==='undefined')return d(u||404);if(typeof n.redirect==='string')return g(n.redirect);let o=[s.before||null,n.before||null].filter(r=>typeof r==='function');if(o.length>0){let r=(n,s)=>{let c=o.pop();if(typeof c!=='function'){return n(u)}return c.call(this,e,t,e=>{if(typeof e==='undefined'||e===!0){if(o.length>0){return r(n,s)}else{return n(u)}}if(e){if(o.length>0){return r(n,s)}else{return n(e)}}return n(d(403))})};return()=>new Promise(r)}if(typeof u==='function'){if(u.isComponent&&u.isComponent())return r(u);return u}return u}}let E=o.beforeEach,A=o.afterEach,O=(r,e)=>{let t=o.errors&&o.errors[r];if(t){return typeof t==='function'?t:()=>t}return e};s={config:{errors:{404:O(404,()=>r('div',{},'Error 404: Not Found')),403:O(403,()=>r('div',{},'Error 403: Forbidden'))}},before:E,after:A,routes:m(o.routes),write:g,Link:v,Router:y};n('router',C);return s};export default index;export { version }