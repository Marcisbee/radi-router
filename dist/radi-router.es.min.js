let version='0.3.1';var index=({r:e,l:r,mount:t,headless:n,Component:o},u)=>{let s={},c=58,a=47;var i,h,l,f;let d=e=>{var r=e.split('/'),t=[],n=[];for(var o=0;o<r.length;o++)c===r[o].charCodeAt(0)?(t.push('([^/]+?)'),n.push(r[o].substr(1))):r[o]!==''&&t.push(r[o]);return[new RegExp('^/'+t.join('/')+'(?:[/])?(?:[?&].*)?$','i'),n]},p=e=>{var r=e.length,t=new Array(r);for(var n=r-1;n>=0;n--)t[n]=d(e[n]);return t},g=e=>{return s.config.errors[e]()},b=e=>{window.location.hash=e;return!0},m=(e,r,t,n,o,u,c)=>{return e(t,n,e=>{if(typeof e==='undefined'||e===!0){if(typeof c==='function'){return m(c,r,t,n,o,u,null)}else o({default:r})}else if(typeof e==='string'&&e.charCodeAt(0)===a){b(e);return u()}else o({default:g(403)});s.after&&s.after(t,n)})},C=e=>{if(l===e)return f;i||(i=Object.keys(s.routes));h||(h=p(i));var r=!1;for(var t=0;t<h.length;t++){if(h[t][0].test(e)){f=new w(e,h[t],s.routes,i[t]);r=!0;break}}l=e;return!r?{key:null}:f};class w{constructor(e,r,t,n){let o=e.split(/[\?\&]/).slice(1).map(e=>e.split('=')).reduce((e,r)=>Object.assign(e,{[r[0]]:r[1]}),{});var u=e.match(r[0]);this.path=e;this.key=n;this.query=o;this.cmp=t[n];this.params=this.cmp.data||{};for(var s=0;s<r[1].length;s++)this.params[r[1][s]]=u[s+1]}}class v extends o{state(){return{location:window.location.hash.substr(1)||'/',params:{},query:{},last:null,active:null}}on(){return{mount(){window.onhashchange=()=>this.setState(this.hashChange());this.setState(this.hashChange())}}}hashChange(){var e=window.location.hash.substr(1)||'/',r=C(e);console.log('[radi-router] Route change',r,this.state.location);return{last:this.state.active,location:e,params:r.params||{},query:r.query||{},active:r.key||''}}}class A extends o{state(){return{to:'/',active:'active',class:'',id:null,title:null}}view(){return e('a',{href:r(this,'to').process(e=>'#'.concat(e)),class:r(this,'to').process(e=>r(this.$router,'active').process(t=>r(this,'class').process(r=>(t===e?'active':'')+' '+r))),id:r(this,'id'),title:r(this,'title')},...this.children)}}class j extends o{inject({active:r,last:t}){let n=s.routes[r],o=typeof n==='object'?n.component:n;if((typeof o==='undefined'||typeof o==='number'||!o)&&typeof n==='undefined')return g(o||404);if(typeof n.redirect==='string')return b(n.redirect);if(typeof s.before==='function'||typeof n.before==='function'){return()=>new Promise((e,u)=>{typeof s.before==='function'?m(s.before,o,r,t,e,u,n.before):typeof n.before==='function'&&m(n.before,o,r,t,e,u,null)})}if(typeof o==='function'){if(o.isComponent&&o.isComponent())return e(o);return o}return o}view(){return[r(this.$router,'active').process(()=>this.inject(this.$router.state)),...this.children]}}let y=u.beforeEach,E=u.afterEach;s={config:{errors:{404:()=>e('div',{},'Error 404: Not Found'),403:()=>e('div',{},'Error 403: Forbidden')}},before:y,after:E,routes:u.routes,write:b,Link:A,Router:j};n('router',v);return s};export default index;export { version }